{"version":3,"file":"ngx-oauth2-oidc.mjs","sources":["../../../projects/ngx-oauth2-oidc/src/lib/_store.ts","../../../projects/ngx-oauth2-oidc/src/domain/model/IOAuth2Parameters.ts","../../../projects/ngx-oauth2-oidc/src/domain/model/IOAuth2Configuration.ts","../../../projects/ngx-oauth2-oidc/src/domain/model/IOAuth2Methods.ts","../../../projects/ngx-oauth2-oidc/src/domain/model/IOAuth2Metadata.ts","../../../projects/ngx-oauth2-oidc/src/domain/model/IOAuth2Config.ts","../../../projects/ngx-oauth2-oidc/src/utils/isObject.ts","../../../projects/ngx-oauth2-oidc/src/utils/nullish.ts","../../../projects/ngx-oauth2-oidc/src/utils/secureRandom.ts","../../../projects/ngx-oauth2-oidc/src/utils/toLowerCaseProperties.ts","../../../projects/ngx-oauth2-oidc/src/utils/isJason.ts","../../../projects/ngx-oauth2-oidc/src/lib/_setParameters.ts","../../../projects/ngx-oauth2-oidc/src/lib/_oauth2ConfigFactory.ts","../../../projects/ngx-oauth2-oidc/src/utils/encrypt.ts","../../../projects/ngx-oauth2-oidc/src/lib/_recoverState.ts","../../../projects/ngx-oauth2-oidc/src/lib/_updateParameters.ts","../../../projects/ngx-oauth2-oidc/src/lib/_interceptor.ts","../../../projects/ngx-oauth2-oidc/src/lib/_getParameters.ts","../../../projects/ngx-oauth2-oidc/src/lib/_verify_token.ts","../../../projects/ngx-oauth2-oidc/src/lib/_mountUrl.ts","../../../projects/ngx-oauth2-oidc/src/lib/_updateMetadata.ts","../../../projects/ngx-oauth2-oidc/src/lib/_httpRequest.ts","../../../projects/ngx-oauth2-oidc/src/lib/_saveState.ts","../../../projects/ngx-oauth2-oidc/src/lib/_request.ts","../../../projects/ngx-oauth2-oidc/src/lib/_fetchDiscoveryDoc.ts","../../../projects/ngx-oauth2-oidc/src/lib/_authorization.ts","../../../projects/ngx-oauth2-oidc/src/lib/_token.ts","../../../projects/ngx-oauth2-oidc/src/lib/_revocation.ts","../../../projects/ngx-oauth2-oidc/src/lib/_errorArray.ts","../../../projects/ngx-oauth2-oidc/src/lib/_apiReguest.ts","../../../projects/ngx-oauth2-oidc/src/lib/oauth2.service.ts","../../../projects/ngx-oauth2-oidc/src/lib/provide-oauth2.ts","../../../projects/ngx-oauth2-oidc/src/lib/idTokenGuard.ts","../../../projects/ngx-oauth2-oidc/src/public-api.ts","../../../projects/ngx-oauth2-oidc/src/ngx-oauth2-oidc.ts"],"sourcesContent":["import { IOAuth2Config } from \"../domain\";\n\n/**\n * Sets/removes an oauth2 session storage item\n *\n * @param name Name of the session storage key. Internally is prefixed by \"oauth2_\"\n * @param value New value. If null or empty string, the item is removed.\n */\nexport const setStore = (\n    name: string,\n    value: unknown = null\n) => {\n    const sto = sessionStorage;\n\n    const val = JSON.parse(JSON.stringify(value));\n\n    if (name == \"config\" && !!value) {\n        delete (val as IOAuth2Config)?.parameters?.id_token;\n        delete (val as IOAuth2Config)?.parameters?.access_token;\n        delete (val as IOAuth2Config)?.parameters?.refresh_token;\n        delete (val as IOAuth2Config)?.parameters?.code;\n        delete (val as IOAuth2Config)?.parameters?.client_secret;\n        delete (val as IOAuth2Config)?.parameters?.code_challenge;\n    }\n\n    name = `oauth2_${name}`;\n    if (val == null || val === \"\") sto.removeItem(name);\n    else sto.setItem(name, JSON.stringify(val))\n};\n\n/**\n * Gets an oauth2 session storage item\n *\n * @param name Name of the session storage key. Internally is prefixed by \"oauth2_\"\n * @returns The stored value\n */\nexport const getStore = (\n    name: string\n): string | null => {\n    const sto = sessionStorage;\n\n    name = `oauth2_${name}`;\n    return sto.getItem(name);\n};\n\n/**\n * Gets an oauth2 session storage item as an object type\n *\n * @param name Name of the session storage key. Internally is prefixed by \"oauth2_\"\n * @returns The stored value\n */\nexport const getStoreObject = (\n    name: string\n): object | null => {\n    const str = getStore(name);\n\n    return str ? (JSON.parse(str) as object) : null;\n};\n","import {  urlType } from \"..\";\n\n/** Discovery endpoint parameter names */\nconst discoveryParameters = [] as string[];\n\n/** Authorization endpoint parameter names */\nconst authorizationParameters = [\n    'acr_values',\n    'aud',\n    'authorization_details',\n    'claims',\n    'claims_locales',\n    'client_id',\n    'code_challenge',\n    'code_challenge_method',\n    'display',\n    'dpop_jkt',\n    'exp',\n    'iat',\n    'id_token_hint',\n    'iss',\n    'jti',\n    'login_hint',\n    'max_age',\n    'nbf',\n    'nonce',\n    'prompt',\n    'redirect_uri',\n    'registration',\n    'request',\n    'request_uri',\n    'resource',\n    'response_mode',\n    'response_type',\n    'scope',\n    'state',\n    'sub',\n    'ui_locales',\n    'vtr'\n];\n\n/** Token endpoint parameter names */\nconst tokenParameters = [\n    \"actor_token\",\n    \"actor_token_type\",\n    \"assertion\",\n    \"audience\",\n    \"authorization_details\",\n    \"client_assertion\",\n    \"client_assertion_type\",\n    \"client_id\",\n    \"client_secret\",\n    \"code\",\n    \"code_verifier\",\n    \"device_code\",\n    \"grant_type\",\n    \"password\",\n    \"redirect_uri\",\n    \"refresh_token\",\n    \"req_cnf\",\n    \"requested_token_type\",\n    \"resource\",\n    \"subject_token\",\n    \"subject_token_type\",\n    \"username\",\n    \"vtr\"\n];\n\n/** Verify token method parameter names */\nconst verifyTokenParameters = [\n    'id_token', 'client_id', 'nonce'\n];\n\n/** Revocation endpoint parameter names */\nconst revocationParameters = [\n    'token_type_hint', 'access_token','refresh_token'\n];\n\n/** OAuth2Parameters object */\nconst parameters = {\n    access_token: \"\", // authorization response, token response\tIETF\t[RFC6749]\n    ace_client_recipientid: undefined as unknown, // client-rs request\tIETF\t[RFC9203]\n    ace_profile: undefined as unknown, // token response IETF\t[RFC9200, Sections 5.8.2, 5.8.4.3]\n    ace_server_recipientid: undefined as unknown, // rs-client response\tIETF\t[RFC9203]\n    acr_values: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    actor_token: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    actor_token_type: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    assertion: \"\", // token request\tIESG\t[RFC7521]\n    aud: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.3][RFC9101]\n    audience: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    authorization_details: \"\", // authorization request, token request, token response\tIETF\t[RFC9396]\n    claim_token: undefined as unknown, // client request, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.1]\n    claims: \"{}\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    claims_locales: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    client_assertion: \"\", // token request\tIESG\t[RFC7521]\n    client_assertion_type: \"\", // token request\tIESG\t[RFC7521]\n    client_id: \"\", // authorization request, token request\tIETF\t[RFC6749]\n    client_secret: \"\", // token request\tIETF\t[RFC6749]\n    cnf: undefined as unknown, // token response\tIETF\t[RFC9201, Section 5]\n    code: \"\", // authorization response, token request\tIETF\t[RFC6749]  The code is always empty, it should never be stored. If needed, the service gets its value as a parameter.\n    code_challenge: \"\", // authorization request\tIESG\t[RFC7636]\n    code_challenge_method: \"\" as \"S256\" | \"plain\", // authorization request\tIESG\t[RFC7636]\n    code_verifier: \"\", // token request\tIESG\t[RFC7636]\n    device_code: \"\", // token request\tIESG\t[RFC8628, Section 3.1]\n    display: \"\" as \"page\" | \"popup\" | \"touch\" | \"wap\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    dpop_jkt: \"\", // authorization request\tIETF\t[RFC9449, Section 10]\n    error: \"\", // authorization response, token response\tIETF\t[RFC6749]\n    error_description: \"\", // authorization response, token response\tIETF\t[RFC6749]\n    error_uri: \"\", // authorization response, token response\tIETF\t[RFC6749]\n    exp: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.4][RFC9101]\n    expires_in: 0 as number, // authorization response, token response\tIETF\t[RFC6749]\n    grant_type: \"\", // token request\tIETF\t[RFC6749]\n    iat: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.6][RFC9101]\n    id_token: \"\", // authorization response, access token response\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    id_token_hint: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    iss: \"\", // authorization request, authorization response\tIETF\t[RFC9207, Section 2][RFC9101][RFC7519, Section 4.1.1]\n    issued_token_type: undefined as unknown, // token response\tIESG\t[RFC8693, Section 2.2.1]\n    jti: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.7][RFC9101]\n    kdcchallenge: undefined as unknown, // rs-client response\tIETF\t[RFC-ietf-ace-key-groupcomm-18]\n    login_hint: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    max_age: 0 as number, // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    nbf: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.5][RFC9101]\n    nfv_token: undefined as unknown, // Access Token Response\t[ETSI]\t[ETSI GS NFV-SEC 022 V2.7.1]\n    nonce: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    nonce1: undefined as unknown, // client-rs request\tIETF\t[RFC9203]\n    nonce2: undefined as unknown, // rs-client response\tIETF\t[RFC9203]\n    password: \"\", // token request\tIETF\t[RFC6749]\n    pct: undefined as unknown, // client request, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.1]\n    // pct\tauthorization server response, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.5]\n    prompt: [] as \"none\"[] | (\"login\" | \"consent\" | \"select_account\")[], // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    redirect_uri: \"\" as urlType, // authorization request, token request\tIETF\t[RFC6749]\n    refresh_token: \"\", // token request, token response\tIETF\t[RFC6749]\n    registration: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    req_cnf: \"\", // token request\tIETF\t[RFC9201, Section 5]\n    request: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    request_uri: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    requested_token_type: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    resource: \"\", // authorization request, token request\tIESG\t[RFC8707]\n    response_mode: \"\" as \"query\" | \"fragment\", // Authorization Request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OAuth 2.0 Multiple Response Type Encoding Practices]\n    response_type: [] as string[], // authorization request\tIETF\t[RFC6749]\n    rpt: undefined as unknown, // client request, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.1]\n    rs_cnf: undefined as unknown, // token response\tIETF\t[RFC9201, Section 5]\n    scope: [] as string[], // authorization request, authorization response, token request ???????, token response\tIETF\t[RFC6749]\n    session_state: undefined as unknown, // authorization response, access token response\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Session Management 1.0, Section 2]\n    sign_info: undefined as unknown, // client-rs request, rs-client response\tIETF\t[RFC-ietf-ace-key-groupcomm-18]\n    state: \"\", // authorization request, authorization response\tIETF\t[RFC6749]\n    sub: \"\", // authorization request\tIETF\t[RFC7519, Section 4.1.2][RFC9101]\n    subject_token: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    subject_token_type: \"\", // token request\tIESG\t[RFC8693, Section 2.1]\n    ticket: undefined as unknown, // client request, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.1]\n    token_type: \"\", // authorization response, token response\tIETF\t[RFC6749]\n    token_type_hint: \"\" as \"access_token\" | \"refresh_token\" | \"pct\", // IETF    [RFC7009} OAuth 2.0 Token Revocation\n    ui_locales: \"\", // authorization request\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Core 1.0 incorporating errata set 1]\n    upgraded: undefined as unknown, // authorization server response, token endpoint\t[Kantara_UMA_WG]\t[UMA 2.0 Grant for OAuth 2.0, Section 3.3.5]\n    username: \"\", // token request\tIETF\t[RFC6749]\n    vtr: \"\", // authorization request, token request\tIESG\t[RFC8485]\n};\n\n/** Verify token method parameters object */\nconst verifyTokenJoseOptions = {\n    algorithms: [] as string[],\n    audience: \"\" as string | string[],\n    clockTolerance: \"\" as string | number,\n    crit: {} as { [key: string]: boolean },\n    currentDate: new Date(),\n    issuer: \"\" as string | string[],\n    maxTokenAge: \"\" as string | number,\n    requiredClaims: [] as string[],\n    subject: \"\",\n    typ: \"\",\n};\n\n/** Parameters section type */\nexport interface IOAuth2Parameters\n    extends Partial<typeof parameters> {};\n\n/** Authorization endpoint parameters object type */\nexport interface IOAuth2AuthorizationParameters\n    extends Partial<typeof authorizationParameters> {};\n\n/** Token endpoint parameters object type */\nexport interface IOAuth2TokenParameters\n    extends Partial<typeof tokenParameters> {};\n\n/** Verify token method parameters object type */\nexport interface IOAuth2VerifyTokenParameters\n    extends Partial<typeof verifyTokenParameters> {};\n\n/** Verify token method jose options object type */\nexport interface IOAuth2VerifyTokenJoseOptions\n    extends Partial<typeof verifyTokenJoseOptions> {};\n\n/** Revocation endpoint parameters object type */\nexport interface IOAuth2RevocationParameters\n    extends Partial<typeof revocationParameters> {};\n\n/** Parameter names */\nexport const parameterNames = {\n    discovery: discoveryParameters,\n    authorization: authorizationParameters,\n    token: tokenParameters,\n    refresh: tokenParameters,\n    revocation: revocationParameters,\n    verify_token: verifyTokenParameters,\n    all: Object.keys(parameters),\n};\n\n/** Get endpoint custom parameter type */\nexport const getType = (name: keyof IOAuth2Parameters) => {\n    const value = parameters[name];\n    return Array.isArray(value)\n        ? \"array\"\n        : value == \"{}\"\n        ? \"json\"\n        : typeof value;\n};\n","import { authorizationGrantType } from \"..\";\n\n/** Configuration object */\nconst configuration = {\n    /** File tag */\n    tag: \"\",\n\n    /**\n     * Authorizationn grant values:\n     *\n     *  'code': Authorization code grant. Default value.\n     *  'implicit': Implicit grant,\n     *  'hybrid': Code and implicit mixed grant,\n     *  'free: Parameters are not modified by the configuration options (config.configuration)\n     *      or by other parameters.\n     *\n     */\n    authorization_grant: \"\" as authorizationGrantType,\n\n    /**\n     * If true, discovery document is not fetched. Default is false.\n     */\n    // no_discovery: false,\n\n    /**\n     * If true, the service will not use PKCE support. Default is false.\n     */\n    no_pkce: false,\n\n    /**\n     * If true, the service will not use the oauth2 parameter \"state\". Default is false.\n     */\n    no_state: false,\n\n    /**\n     * If true, the service will have access to the storage. Default is false.\n     */\n    storage: false,\n\n    /**\n     * If true, the methods return the request parameters along with the response.\n     */\n    test: false,\n\n    /**\n     * If true, the revocation endpoint includes the the token in the authorization\n     *  header. Default is false.\n     */\n    revocation_header: false,\n\n    /**\n     * Predefined discovery document URI.\n     */\n    discovery_endpoint: \"\",\n\n    /**\n     * Default is \".well-known/openid-configuration\". Ignored if\n     *      \"discovery_endpoint\" is defined. Sufix for the default\n     *      discovery document URI.\n     */\n    well_known_sufix: \"\",\n\n    /**\n     * 'Content-Type' header value for GET/POST requests (without HREF\n     *      redirection) from endpoints. Default \"application/x-www-form-urlencoded\".\n     */\n    content_type: \"\",\n};\n\n/** Options object type */\nexport interface IOAuth2Configuration extends Partial<typeof configuration> {}\n\n/** Option names */\nexport const configurationOptions = Object.keys(configuration);\n\n/** Authorization grant values */\nexport const authorizationGrantValues = [\n    \"code\", \"implicit\", \"hybrid\", \"free\"\n] as const;\n","import { customParametersType } from \"..\";\nimport { IOAuth2VerifyTokenJoseOptions, IOAuth2VerifyTokenParameters } from \"./IOAuth2Parameters\";\n\n/** Methods object */\nexport const methods = {\n    /**\n     * Custom parameters for the discovery endpoint\n     */\n    discovery: {} as customParametersType,\n\n    /**\n     * Custom parameters for the authorizaton endpoint\n     */\n    authorization: {} as customParametersType,\n\n    /**\n     * Custom parameters for the token endpoint\n     */\n    token: {} as customParametersType,\n\n    /**\n     * Custom parameters for the refresh endpoint\n     */\n    refresh: {} as customParametersType,\n\n    /**\n     * JOSE token verification options\n     */\n    verify_token: {} as IOAuth2VerifyTokenParameters &\n        IOAuth2VerifyTokenJoseOptions,\n\n    /**\n     * Custom parameters for the revocation endpoint\n     */\n    revocation: {} as customParametersType,\n};\n\n/** Methods object type */\nexport interface IOAuth2Methods extends Partial<typeof methods> {}\n\n/** Method names */\nexport const methodNames = Object.keys(methods);\n","import { urlType } from \"..\";\n\n/** Metadata object */\nconst metadata = {\n    acr_values_supported: [] as string[], // JSON array containing a list of the Authentication Context Class References that this OP supports\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    authorization_details_types_supported: [] as string[], // JSON array containing the authorization details types the AS supports\tIETF\t[RFC9396, Section 10]\n    authorization_endpoint: \"\" as urlType, // URL of the authorization server's authorization endpoint\tIESG\t[RFC8414, Section 2]\n    authorization_response_iss_parameter_supported: false, // Boolean value indicating whether the authorization server provides the iss parameter in the authorization response.\tIETF\t[RFC9207, Section 3]\n    backchannel_authentication_endpoint: \"\" as urlType, // CIBA Backchannel Authentication Endpoint\t[OpenID_Foundation_MODRNA_Working_Group]\t[OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0, Section 4]\n    backchannel_authentication_request_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS signing algorithms supported for validation of signed CIBA authentication requests\t[OpenID_Foundation_MODRNA_Working_Group]\t[OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0, Section 4]\n    backchannel_logout_session_supported: false, // Boolean value specifying whether the OP can pass a sid (session ID) Claim in the Logout Token to identify the RP session with the OP\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Back-Channel Logout 1.0, Section 2]\n    backchannel_logout_supported: false, // Boolean value specifying whether the OP supports back-channel logout, with true indicating support\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Back-Channel Logout 1.0, Section 2]\n    backchannel_token_delivery_modes_supported: [] as string[], // Supported CIBA authentication result delivery modes\t[OpenID_Foundation_MODRNA_Working_Group]\t[OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0, Section 4]\n    backchannel_user_code_parameter_supported: false, // Indicates whether the OP supports the use of the CIBA user_code parameter.\t[OpenID_Foundation_MODRNA_Working_Group]\t[OpenID Connect Client-Initiated Backchannel Authentication Flow - Core 1.0, Section 4]\n    check_session_iframe: \"\" as urlType, // URL of an OP iframe that supports cross-origin communications for session state information with the RP Client, using the HTML5 postMessage API\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Session Management 1.0, Section 3.3]\n    claim_types_supported: [] as string[], // JSON array containing a list of the Claim Types that the OpenID Provider supports\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    claims_locales_supported: [] as string[], // Languages and scripts supported for values in Claims being returned, represented as a JSON array of BCP 47 [RFC5646] language tag values\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    claims_parameter_supported: false, // Boolean value specifying whether the OP supports use of the \"claims\" parameter\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    claims_supported: [] as string[], // JSON array containing a list of the Claim Names of the Claims that the OpenID Provider MAY be able to supply values for\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    code_challenge_methods_supported: [] as string[], // PKCE code challenge methods supported by this authorization server\tIESG\t[RFC8414, Section 2]\n    device_authorization_endpoint: \"\" as urlType, // URL of the authorization server's device authorization endpoint\tIESG\t[RFC8628, Section 4]\n    display_values_supported: [] as string[], // JSON array containing a list of the \"display\" parameter values that the OpenID Provider supports\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    dpop_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS algorithms supported for DPoP proof JWTs\tIETF\t[RFC9449, Section 5.1]\n    end_session_endpoint: \"\" as urlType, // URL at the OP to which an RP can perform a redirect to request that the End-User be logged out at the OP\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect RP-Initiated Logout 1.0, Section 2.1]\n    frontchannel_logout_supported: false, // Boolean value specifying whether the OP supports HTTP-based logout, with true indicating support\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Front-Channel Logout 1.0, Section 3]\n    grant_types_supported: [] as string[], // JSON array containing a list of the OAuth 2.0 grant type values that this authorization server supports\tIESG\t[RFC8414, Section 2]\n    id_token_encryption_alg_values_supported: [] as string[], // JSON array containing a list of the JWE \"alg\" values supported by the OP for the ID Token\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    id_token_encryption_enc_values_supported: [] as string[], // JSON array containing a list of the JWE \"enc\" values supported by the OP for the ID Token\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    id_token_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS \"alg\" values supported by the OP for the ID Token\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    introspection_encryption_alg_values_supported: [] as string[], // JSON array containing a list of algorithms supported by the authorization server for introspection response content key encryption (alg value).\tIETF\t[RFC-ietf-oauth-jwt-introspection-response-12, Section 7]\n    introspection_encryption_enc_values_supported: [] as string[], // JSON array containing a list of algorithms supported by the authorization server for introspection response content encryption (enc value).\tIETF\t[RFC-ietf-oauth-jwt-introspection-response-12, Section 7]\n    introspection_endpoint: \"\" as urlType, // URL of the authorization server's OAuth 2.0 introspection endpoint\tIESG\t[RFC8414, Section 2]\n    introspection_endpoint_auth_methods_supported: [] as string[], // JSON array containing a list of client authentication methods supported by this introspection endpoint\tIESG\t[RFC8414, Section 2]\n    introspection_endpoint_auth_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS signing algorithms supported by the introspection endpoint for the signature on the JWT used to authenticate the client at the introspection endpoint\tIESG\t[RFC8414, Section 2]\n    introspection_signing_alg_values_supported: [] as string[], // JSON array containing a list of algorithms supported by the authorization server for introspection response signing.\tIETF\t[RFC-ietf-oauth-jwt-introspection-response-12, Section 7]\n    issuer: \"\", // Authorization server's issuer identifier URL\tIESG\t[RFC8414, Section 2]\n    jwks_uri: \"\" as urlType, // URL of the authorization server's JWK Set document\tIESG\t[RFC8414, Section 2]\n    mtls_endpoint_aliases: [] as string[], // JSON object containing alternative authorization server endpoints, which a client intending to do mutual TLS will use in preference to the conventional endpoints.\tIESG\t[RFC8705, Section 5]\n    nfv_token_encryption_alg_values_supported: [] as string[], // JSON array containing a list of the JWE encryption algorithms (alg values) supported by the server to encode the JWT used as NFV Token\t[ETSI]\t[ETSI GS NFV-SEC 022 V2.7.1]\n    nfv_token_encryption_enc_values_supported: [] as string[], // JSON array containing a list of the JWE encryption algorithms (enc values) supported by the server to encode the JWT used as NFV Token\t[ETSI]\t[ETSI GS NFV-SEC 022 V2.7.1]\n    nfv_token_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS signing algorithms supported by the server for signing the JWT used as NFV Token\t[ETSI]\t[ETSI GS NFV-SEC 022 V2.7.1]\n    op_policy_uri: \"\" as urlType, // URL that the authorization server provides to the person registering the client to read about the authorization server's requirements on how the client can use the data provided by the authorization server\tIESG\t[RFC8414, Section 2]\n    op_tos_uri: \"\" as urlType, // URL that the authorization server provides to the person registering the client to read about the authorization server's terms of service\tIESG\t[RFC8414, Section 2]\n    pushed_authorization_request_endpoint: \"\" as urlType, // URL of the authorization server's pushed authorization request endpoint\tIESG\t[RFC9126, Section 5]\n    registration_endpoint: \"\" as urlType, // URL of the authorization server's OAuth 2.0 Dynamic Client Registration Endpoint\tIESG\t[RFC8414, Section 2]\n    request_object_encryption_alg_values_supported: [] as string[], // JSON array containing a list of the JWE \"alg\" values supported by the OP for Request Objects\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    request_object_encryption_enc_values_supported: [] as string[], // JSON array containing a list of the JWE \"enc\" values supported by the OP for Request Objects\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    request_object_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS \"alg\" values supported by the OP for Request Objects\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    request_parameter_supported: false, // Boolean value specifying whether the OP supports use of the \"request\" parameter\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    request_uri_parameter_supported: false, // Boolean value specifying whether the OP supports use of the \"request_uri\" parameter\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    require_pushed_authorization_requests: false, // Indicates whether the authorization server accepts authorization requests only via PAR.\tIESG\t[RFC9126, Section 5]\n    require_request_uri_registration: false, // Boolean value specifying whether the OP requires any \"request_uri\" values used to be pre-registered\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    require_signed_request_object: false, // Indicates where authorization request needs to be protected as Request Object and provided through either request or request_uri parameter.\tIETF\t[RFC9101, Section 10.5]\n    response_modes_supported: [] as string[], // JSON array containing a list of the OAuth 2.0 \"response_mode\" values that this authorization server supports\tIESG\t[RFC8414, Section 2]\n    response_types_supported: [] as string[], // JSON array containing a list of the OAuth 2.0 \"response_type\" values that this authorization server supports\tIESG\t[RFC8414, Section 2]\n    revocation_endpoint: \"\" as urlType, // URL of the authorization server's OAuth 2.0 revocation endpoint\tIESG\t[RFC8414, Section 2]\n    revocation_endpoint_auth_methods_supported: [] as string[], // JSON array containing a list of client authentication methods supported by this revocation endpoint\tIESG\t[RFC8414, Section 2]\n    revocation_endpoint_auth_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS signing algorithms supported by the revocation endpoint for the signature on the JWT used to authenticate the client at the revocation endpoint\tIESG\t[RFC8414, Section 2]\n    scopes_supported: [] as string[], // JSON array containing a list of the OAuth 2.0 \"scope\" values that this authorization server supports\tIESG\t[RFC8414, Section 2]\n    service_documentation: \"\" as urlType, // URL of a page containing human-readable information that developers might want or need to know when using the authorization server\tIESG\t[RFC8414, Section 2]\n    signed_metadata: \"\", // Signed JWT containing metadata values about the authorization server as claims\tIESG\t[RFC8414, Section 2.1]\n    subject_types_supported: [] as string[], // JSON array containing a list of the Subject Identifier types that this OP supports\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    tls_client_certificate_bound_access_tokens: false, // Indicates authorization server support for mutual-TLS client certificate-bound access tokens.\tIESG\t[RFC8705, Section 3.3]\n    token_endpoint: \"\" as urlType, // URL of the authorization server's token endpoint\tIESG\t[RFC8414, Section 2]\n    token_endpoint_auth_methods_supported: [] as string[], // JSON array containing a list of client authentication methods supported by this token endpoint\tIESG\t[RFC8414, Section 2]\n    token_endpoint_auth_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS signing algorithms supported by the token endpoint for the signature on the JWT used to authenticate the client at the token endpoint\tIESG\t[RFC8414, Section 2]\n    ui_locales_supported: [] as string[], // Languages and scripts supported for the user interface, represented as a JSON array of language tag values from BCP 47 [RFC5646]\tIESG\t[RFC8414, Section 2]\n    userinfo_encryption_alg_values_supported: [] as string[], // JSON array containing a list of the JWE \"alg\" values supported by the UserInfo Endpoint\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    userinfo_encryption_enc_values_supported: [] as string[], // JSON array containing a list of the JWE \"enc\" values supported by the UserInfo Endpoint\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    userinfo_endpoint: \"\" as urlType, // URL of the OP's UserInfo Endpoint\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n    userinfo_signing_alg_values_supported: [] as string[], // JSON array containing a list of the JWS \"alg\" values supported by the UserInfo Endpoint\t[OpenID_Foundation_Artifact_Binding_Working_Group]\t[OpenID Connect Discovery 1.0, Section 3]\n}\n\n/** Metadata section type */\nexport interface IOAuth2Metadata extends Partial<typeof metadata> {};\n\n/** Metadata names */\nexport const metadataNames = Object.keys(\n    metadata\n);\n","import { IOAuth2Configuration, IOAuth2Metadata, IOAuth2Parameters } from \"../index\";\nimport { methods } from \"./IOAuth2Methods\";\n\n/** Configuration object */\nconst config = {\n    /** Configuration section. Configuration options and method parameters */\n    configuration: {} as IOAuth2Configuration,\n\n    /** Metadata section. Fields loaded from discovery document override configured values */\n    metadata: {} as IOAuth2Metadata,\n\n    /** Parameters section. OAuth parameters. Values ​​returned by endpoints override configured values */\n    parameters: {} as IOAuth2Parameters,\n\n    ...methods\n};\n\n/** Configuration object type */\nexport interface IOAuth2Config extends Partial<typeof config> {} // IOAuth2Methods, Partial<typeof config> {}\n\n/** Configuration object sections */\nexport const configSections = [\n    ...Object.keys(config),\n] as (keyof typeof config)[];\n","export const isObject = (obj: unknown) => obj != null && obj.constructor && obj.constructor.name === \"Object\";\n","export const isNull = <T>(data: T, isNull?: (v: T) => boolean) =>\n    (data == null) || (isNull?.(data) ?? false);\n\nexport const notNull = <T>(data: T, _default: T, isNull?: (v: T) => boolean) =>\n    (data == null) || (isNull?.(data) ?? false) ? _default : data;\n\n/**\n * Returns true if 'data' is a string or nullish.\n *\n * @param data value to check\n * @returns\n */\nexport const isStrNull = (data: unknown) =>\n    typeof data == \"string\" || data == undefined || data == null;\n\n/**\n * Error if 'data' is not a string or nullish. If 'data'\n *   is nullish returns '_default', otherwise it returns 'data'.\n *\n * @param data value to check and convert\n * @param _default default returned value\n * @returns\n */\nexport const notStrNull = (data: unknown, _default: string) => {\n    if (!isStrNull(data))\n        throw new Error(\n            `${data}\" is not a string or nullish.`,\n            { cause: \"notStrNull\" }\n        );\n\n    else return !data ? _default : data as string;\n}\n","/**\n * Returns an (16 x length) hex characters random string\n * @param length Length in groups of 16 hex characters. Defaults to 1\n * @returns\n */\nexport const secureRandom = (length = 1) => {\n    const array = new BigUint64Array(length);\n\n    window.crypto.getRandomValues(array);\n\n    const str = array.reduce((p, v) => `${p}${v.toString(16)}`, \"\")\n\n    return str;\n};\n","export const toLowerCaseProperties = <T>(obj?: T) => {\n    if (!obj)\n        return undefined;\n\n    const genericObj = obj as {\n        [key: string]: unknown;\n    };\n    const lowerObj = Object.fromEntries(\n        Object.entries(genericObj).map(([k, v]) => [k.toLowerCase(), v])\n    );\n    return lowerObj as T;\n};\n","export const isJSON = (v: unknown) => {\n    try {\n        return !!v && typeof v == \"string\" && !!JSON.parse(v);\n    } catch {\n        return false;\n    }\n};\n","import { customParametersType, getType, IOAuth2Parameters, parameterNames } from \"../domain\";\nimport { toLowerCaseProperties } from \"../utils\";\nimport { isJSON } from \"../utils/isJason\";\n\nexport const _setParameters = (ioauth2Parameters = <customParametersType>{}, functionName = \"\") => {\n\n    if (!ioauth2Parameters || Object.entries(ioauth2Parameters).length == 0)\n        return {};\n\n    const parameters = toLowerCaseProperties(ioauth2Parameters)!; // Internal configuration parameters object\n\n    // Parameter names are not unexpected (are warnongs)\n\n    const parmKeys = Object.keys(parameters);\n    const parmErrors = parmKeys.filter(\n        key => !parameterNames.all.includes(key)\n    );\n\n    if (parmErrors.length)\n        console.error(\n            `WARNING: Unexpected parameters: ${parmErrors.join(\", \")}.`,\n            {\n                message: `Custom parameters must be included inside the enpoint configuration options.`,\n                cause: `oauth2 ${functionName}`,\n            }\n        );\n\n    // Parameters types\n\n    for (const parm in parameters) {\n        const key = parm as keyof IOAuth2Parameters;\n        const value = parameters[key];\n        const type = getType(key);\n\n        if (value === undefined || value === null) {\n            delete parameters[key];\n            continue\n        }\n\n        if (type == \"array\" && typeof value === \"string\")\n            (parameters[key] as string[]) = [value];\n\n        if (type == \"array\" && typeof value === \"number\")\n            (parameters[key] as unknown as number[]) = [value];\n\n        if (type == \"array\" && typeof value === \"bigint\")\n            (parameters[key] as unknown as bigint[]) = [value];\n\n        if (type == \"array\" && !Array.isArray(parameters[key])) {\n            throw new Error(`The parameter \"${key}\" must be an array`, {\n                cause: `oauth2 ${functionName}`,\n            });\n        }\n\n        if (type == \"json\" && !isJSON(value)) {\n            throw new Error(`The parameter \"${key}\" must be of type JSON`, {\n                cause: `oauth2 ${functionName}`,\n            });\n        }\n\n        if (\n            type != \"array\" &&\n            type != \"json\" &&\n            type != \"undefined\" &&\n            type != typeof value\n        ) {\n            throw new Error(\n                `The parameter \"${key}\" must be of type ${type}`,\n                {\n                    cause: `oauth2 ${functionName}`,\n                }\n            );\n        }\n    }\n\n    return parameters\n}\n","import {\n    IOAuth2Config,\n    configSections,\n    configurationOptions,\n    customParametersType,\n    metadataNames,\n} from \"../domain\";\nimport { isObject, toLowerCaseProperties } from \"../utils\";\nimport { _setParameters } from \"./_setParameters\";\n\n/**\n * Processes an initial external configuration object (IOAuth2Config type) and\n *   converts it in the internal configuration object (oauth2Config type).\n *   Converts all undefined booleans to false. Removes all undefined fields. Trims\n *   all string values and removes empty fields. Converts all string[] to\n *   non-empty strings array.\n *\n * @param ioauth2Config The initial external configuration object\n * @returns The internal configuration object\n */\nexport const _oauth2ConfigFactory = (ioauth2Config = <IOAuth2Config>{}) => {\n    if (!ioauth2Config || Object.entries(ioauth2Config).length == 0)\n        return {};\n\n    const cfg = <IOAuth2Config>{}; // Internal configuration object\n\n    ioauth2Config = toLowerCaseProperties(ioauth2Config)!;\n\n    // Configuration sections are objects and not unexpected\n\n    for (const section in ioauth2Config) {\n        const key = section as keyof IOAuth2Config;\n        const value = ioauth2Config[key];\n\n        if (!isObject(value))\n            throw new Error(\n                `Initial configuration section \"${section}\" is not an object.`,\n                { cause: \"oauth2 oauth2ConfigFactory\" }\n            );\n\n        if (!(configSections as string[]).includes(section))\n            throw new Error(\n                `Unexpected initial configuration section \"${section}\".`,\n                { cause: \"oauth2 oauth2ConfigFactory\" }\n            );\n\n        cfg[key] = toLowerCaseProperties<any>(value)!;\n    }\n\n    // Configuration options are not unexpected\n\n    cfg.configuration ??= {};\n\n    const confKeys = Object.keys(cfg.configuration);\n    const confErrors = confKeys.filter(\n        key => !configurationOptions.includes(key)\n    );\n\n    if (confErrors.length)\n        throw new Error(\n            `Unexpected configuration options: ${confErrors.join(\n                \", \"\n            )}`,\n            { cause: \"oauth2 oauth2ConfigFactory\" }\n        );\n\n    cfg.parameters = _setParameters(cfg.parameters as customParametersType, \"oauth2ConfigFactory\");\n    cfg.parameters.redirect_uri ??= window.location.href\n        .split(\"#\")[0]\n        .split(\"?\")[0];\n\n    cfg.metadata ??= {};\n\n    const metaKeys = Object.keys(cfg.metadata);\n    const metaErrors = metaKeys.filter(name => !metadataNames.includes(name));\n\n    if (metaErrors.length)\n        console.error(\n            `WARNING: Unexpected metadata fields ${metaErrors.join(\", \")}.`,\n            { cause: \"oauth2 oauth2ConfigFactory\" }\n        );\n\n    return cfg;\n};\n","export const encrypt = (\n    text: string\n): Promise<[CryptoKey, ArrayBuffer, ArrayBuffer]> =>\n    window.crypto.subtle\n        .generateKey(\n            {\n                name: \"AES-GCM\",\n                length: 256,\n            },\n            true,\n            [\"encrypt\", \"decrypt\"]\n        )\n        .then(async key => {\n            const iv = window.crypto.getRandomValues(new Uint8Array(12));\n            const cipher = await window.crypto.subtle.encrypt(\n                {\n                    name: \"AES-GCM\",\n                    iv,\n                },\n                key,\n                new TextEncoder().encode(text)\n            );\n            return [key, iv, cipher];\n        });\n\nexport const decrypt = (\n    key: CryptoKey,\n    iv: ArrayBuffer,\n    cipher: ArrayBuffer\n) =>\n    window.crypto.subtle\n        .decrypt(\n            {\n                name: \"AES-GCM\",\n                iv\n            },\n            key,\n            cipher\n        )\n        .then (arrayBuffer => new TextDecoder(\"UTF-8\").decode(arrayBuffer));\n\nexport const arrayBufferToHexString = (arrayBuffer: ArrayBuffer) => {\n    const uint8Array = new Uint8Array(arrayBuffer);\n    const string = Array.from(uint8Array)\n        .map(byte => byte.toString(16).padStart(2, \"0\"))\n        .join(\"\");\n\n    return string\n}\n\nexport const hexStringToArrayBuffer = (string: string) => {\n    const matchArray = string.match(/[\\da-f]{2}/gi);\n\n    if (!matchArray)\n        return new ArrayBuffer(0);\n\n    const uint8Array = new Uint8Array(\n        matchArray.map(function (h) {\n            return parseInt(h, 16);\n        })\n    );\n\n    return uint8Array.buffer\n}\n\nexport const getCookie = (name: string) => {\n    let start = document.cookie.indexOf(`${name}=`);\n\n    if (start < 0)\n        return \"\";\n\n    start += (name.length + 1);\n    const end = document.cookie.indexOf(\";\", start);\n    const value = document.cookie.substring(\n        start,\n        end >= 0 ? end : undefined\n    );\n\n    return value\n}\n","import { IOAuth2Config, jsonObject } from \"../domain\";\nimport { decrypt, getCookie, hexStringToArrayBuffer } from \"../utils/encrypt\";\nimport { _oauth2ConfigFactory } from \"./_oauth2ConfigFactory\";\nimport { setStore } from \"./_store\";\n\nexport const _recover_state = async (\n    config: IOAuth2Config, // Parameter passed by reference and updated (oauth2Service.config)\n    idToken: jsonObject // Parameter passed by reference and updated (oauth2Service.idToken)\n) => {\n    const cookieValue = getCookie(\"ngx_oauth2_oidc\");\n    const hexString = sessionStorage.getItem(\"oauth2_unload\");\n\n    sessionStorage.removeItem(\"oauth2_unload\");\n    document.cookie = \"ngx_oauth2_oidc=; max-age=0\";\n\n    //  The configuration is only restored if it was previously saved and if the current\n    //      configuration is empty\n    if (\n        !Object.entries(config).length &&\n        cookieValue.length == 88 &&\n        hexString?.length\n    ) {\n        const keyValue = cookieValue.substring(0, 64);\n        const ivValue = cookieValue.substring(64);\n        const keyBuffer = hexStringToArrayBuffer(keyValue);\n        const ivBuffer = hexStringToArrayBuffer(ivValue);\n        const hexData = hexStringToArrayBuffer(hexString ?? \"\");\n        const importedKey = await window.crypto.subtle.importKey(\n            \"raw\",\n            keyBuffer,\n            \"AES-GCM\",\n            false,\n            [\"decrypt\"]\n        );\n        const data = await decrypt(importedKey, ivBuffer, hexData);\n        const parsed = JSON.parse(data);\n        const newConfig = parsed.config ?? config ?? {};\n        const newIdToken = parsed.idToken ?? idToken ?? {};\n\n        Object.assign(config, _oauth2ConfigFactory(newConfig)); // Parameter passed by reference and updated\n        Object.assign(idToken, newIdToken);\n\n        const storage = config.configuration?.storage;\n\n        setStore(\"config\", storage ? config : null);\n        setStore(\"idToken\", storage ? idToken : null);\n        setStore(\"test\");\n    }\n}\n","import { IOAuth2Config, IOAuth2Parameters, customParametersType, getType } from \"../domain\";\nimport { setStore } from \"./_store\";\n\n/**\n * Converts an object of string type parameters to an IOAuth2Parameters object\n *   and saves the new configuration parameters. Converts the \"expires_in\" parameter\n *   in a Epoch date (milliseconds)\n *\n * @param obj The object of string type parameters\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated (configuration.parameters)\n * @returns An IOAuth2Parameters object\n */\nexport const updateParameters = (\n    obj: { [key: string]: string },\n    config: IOAuth2Config // Passed by reference and updated (configuration.parameters)\n) => {\n    const storage = config.configuration?.storage;\n    const newObj = <customParametersType>{}; //<IOAuth2Parameters>{};\n\n    // TODO: test number and boolean conversion\n    for (const key in obj) {\n        const newKey = key as keyof IOAuth2Parameters;\n        const value = obj[key];\n        const type = getType(newKey);\n        const newValue =\n            type == \"array\"\n                ? value.split(\" \")\n                : type == \"number\"\n                ? (JSON.parse(value) as number)\n                : type == \"boolean\"\n                ? (JSON.parse(value) as boolean)\n                : value;\n\n        (newObj[key] as unknown) = newValue;\n    }\n\n    if (newObj[\"expires_in\"]) {\n        newObj[\"expires_in\"] =\n            new Date().getTime() + (newObj[\"expires_in\"] as number) * 1000;\n    }\n\n    config.parameters = {\n        ...config.parameters,\n        ...newObj,\n    };\n\n    setStore(\n        \"config\",\n        storage\n            ? config\n            : null\n    );\n\n    return newObj as IOAuth2Parameters;\n};\n","import { IOAuth2Config, IOAuth2Parameters, jsonObject } from \"../domain\";\nimport { _oauth2ConfigFactory } from \"./_oauth2ConfigFactory\";\nimport { _recover_state } from \"./_recoverState\";\nimport { updateParameters } from \"./_updateParameters\";\n\nexport const _interceptor = async (\n    config: IOAuth2Config, // Parameter passed by reference and updated (oauth2Service.config)\n    idToken: jsonObject // Parameter passed by reference and updated (oauth2Service.idToken)\n) => {\n\n    await _recover_state(config, idToken);\n\n    const search = decodeURIComponent(window.location.search);\n    const hash = decodeURIComponent(window.location.hash);\n    const str = hash.length ? hash : search;\n    const substr = str.substring(1);\n    const array = substr.length ? substr.split(\"&\") : [];\n    const entries = array.map(v => v.split(\"=\"));\n    const params = Object.fromEntries(entries);\n    const parmsState = config?.parameters?.state;\n\n    window.history.replaceState({}, \"\", window.location.pathname);\n\n    if (!entries.length) return Promise.resolve({} as IOAuth2Parameters);\n\n    if (parmsState && parmsState !== params[\"state\"])\n        return Promise.reject(\n            new Error(`Ilegal state received.`, {\n                cause: \"oauth2 interceptor\",\n            })\n        );\n\n    const newParams = updateParameters(params, config);\n\n    if (newParams[\"error\"])\n        return Promise.reject(\n            new Error(`${JSON.stringify(newParams, null, 4)}`, {\n                cause: \"oauth2 interceptor\",\n            })\n        );\n\n    return Promise.resolve(newParams);\n};\n","import { IOAuth2Config, IOAuth2Methods, IOAuth2Parameters, customParametersType, parameterNames } from \"../domain\";\n\ninterface IFilter {\n    filter(predicate: (key: string, value: any, object: object) => any): {\n        [key: string]: unknown;\n    };\n}\n\nconst attributes = {\n    // @ts-expect-error\n    value: function (\n        predicate: (key: string, value: any, object: object) => any\n    ) {\n        const entries = Object.entries(this);\n        return Object.fromEntries(\n            entries.filter(value => predicate(value[0], value[1], this))\n        );\n    },\n    enumerable: false, // this is actually the default\n};\n\n/**\n * Returns the parameters defined within the configuration object\n *   (standard and custom parameters) that are appropriate for\n *   the indicated method. Remove null or undefined\n *   values. Custom parameters overwrite standar parameters.\n *\n * @param method Method name\n * @param config Configuration object\n * @returns Object with the parameters for the method\n */\nexport const getParameters = (\n    method: keyof IOAuth2Methods,\n    config: IOAuth2Config\n): customParametersType => {\n    const parameters = config.parameters ?? {};\n    const customParams = config[method] ?? {};\n    const standardParms = getStandardParameters(method, parameters);\n    const _parms = { ...standardParms, ...customParams };\n\n    Object.defineProperty(_parms, \"filter\", attributes);\n\n    const parms = (_parms as IFilter).filter((_: string, value: unknown) => value != null);\n\n\n    return parms as customParametersType;\n};\n\n/**\n * Returns the parameters defined within the configuration object\n *   (standard parameters) that are appropriate for the indicated\n *   method. Removes null or undefined parameters.\n *\n * @param method Method name\n * @param parameters Standard configuration parameters\n * @returns Object with the standard parameters for the method\n */\nconst getStandardParameters = (\n    method: keyof typeof parameterNames,\n    parameters: IOAuth2Parameters\n) => {\n    const names = parameterNames[method];\n\n    Object.defineProperty(parameters, \"filter\", attributes);\n    // @ts-ignore\n    const parms = parameters.filter(key => names.includes(key));\n\n    return parms as IOAuth2Parameters;\n};\n","import { createRemoteJWKSet, JWTPayload, jwtVerify } from \"jose\";\nimport { IOAuth2Config, customParametersType } from \"../domain\";\nimport { setStore } from \"./_store\";\nimport { getParameters } from \"./_getParameters\";\nimport { _setParameters } from \"./_setParameters\";\n\n/**\n * Verification of the id_token saved in the configuration. Makes use of the 'jose' library.\n *   Needs the \"jwks_uri\" and \"issuer\" metadata (see jose library). You also need the parameters.\n *   id_token, client_id, audience (or client_id) and nonce. This data can be overwritten by the\n *   options parameter data. Returns the payload of the id_token and saves it to storage and\n *   memory. In test mode, the request payload is also stored inside sessionStorage.\n *\n * @param config Configuration object saved in memory.\n * @param customParameters Custom parameters for the request. May include values ​​to override 'jwks_uri'\n *      and 'issuer' metadata.\n * @param issuer Authorization server's issuer identifier URL\n * @param jwks_uri URL of the authorization server's JWK Set document\n * @returns The Promise with the id_token payload or error\n */\nexport const _verify_token = async (\n    config: IOAuth2Config,\n    customParameters = <customParametersType>{},\n    _issuer?: string,\n    _jwks_uri?: string\n) => {\n    // Configuration options\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    // Metadata fields\n    const issuer = _issuer ?? config.metadata?.issuer ?? \"\";\n    const jwks_uri = _jwks_uri ?? config.metadata?.jwks_uri ?? \"\";\n    // Endpoint parameters\n    const str = (name: string) =>\n        (customParameters[name] as string) ?? parms[name] ?? \"\";\n    const parms = _setParameters({\n        ...getParameters(\"verify_token\", config),\n        ...customParameters,\n    });\n    const id_token = str(\"id_token\");\n    const nonce = str(\"nonce\");\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    if (!id_token) return;\n\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Errors & warnings\n    //\n\n    if (!jwks_uri)\n        throw new Error(`Value ​​for 'jwks_uri' metadata is missing.`, {\n            cause: \"oauth2 verify_token\",\n        });\n\n    if (!issuer)\n        throw new Error(`Value ​​for 'issuer' metadata is missing.`, {\n            cause: \"oauth2 verify_token\",\n        });\n\n    //\n    // End of errors & warnings\n    //\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Modify endpoint parameters based on the values ​​of other parameters\n    //      and configuration options\n    //\n\n    // AUDIENCE\n\n    const audience =\n        (parms[\"audience\"] as string | string[]) ?? parms[\"client_id\"] ?? \"\";\n\n    if (!audience)\n        throw new Error(\n            `The values ​​for the 'client_id' parameter, 'client_id' option, and 'audience' option are missing.`,\n            { cause: \"oauth2 verify_token\" }\n        );\n\n    // JVTVERIFYOPTIONS\n\n    Object.assign(parms, { nonce, issuer, audience, jwks_uri });\n\n    const JWKS = createRemoteJWKSet(new URL(jwks_uri));\n    const jvtVerifyOptions = { ...parms } as customParametersType;\n\n    delete jvtVerifyOptions[\"id_token\"];\n    delete jvtVerifyOptions[\"jwks_uri\"];\n    delete jvtVerifyOptions[\"client_id\"];\n\n    // PAYLOAD\n\n    let payload: JWTPayload = {};\n    try {\n        const { payload: readPayload } = await jwtVerify(\n            id_token,\n            JWKS,\n            jvtVerifyOptions\n        );\n        payload = readPayload;\n    } catch (err) {\n        const error = new Error((err as Error).message, {\n            cause: \"oauth2 verify_token\",\n        });\n        error.name = (err as Error).name;\n        throw error;\n    }\n\n    if (payload[\"nonce\"] && payload[\"nonce\"] != nonce) {\n        const error = Error('unexpected \"nonce\" claim value', {\n            cause: \"oauth2 verify_token\",\n        });\n        error.name = \"JWTClaimValidationFailed\";\n        throw error;\n    }\n\n    //\n    // End of modifying endpoint parameters\n    //\n    ///////////////////////////////////////////////////////////////////\n\n    if (test) {\n        setStore(\"test\", storage ? parms : null);\n    }\n\n    return Promise.resolve(payload);\n};\n","/**\n * Returns a new URL form a base URL.\n *   Replaces the protocol if provided. Adds sufix if provided.\n *   Removes trailing slashes if removeTrailingSlash is true.\n *\n * @param base Initial URL\n * @param protocol New protocol\n * @param sufix URL sufix\n * @param removeTrailingSlash If true, removes trailing slashes\n * @returns New URL\n */\nexport const mountUrl = (\n    base: string,\n    protocol?: string,\n    sufix?: string,\n    removeTrailingSlash?: boolean\n) => {\n    let url = base;\n\n    if (protocol) {\n        const matches = url.match(/^.+:\\/\\//);\n        const currentProtocol = matches ? matches[0].toLowerCase() : \"\";\n        const newProtocol = `${protocol}://`.toLowerCase();\n\n        if (currentProtocol && currentProtocol != newProtocol) {\n            url = url.replace(currentProtocol, newProtocol);\n        }\n\n        if (!currentProtocol) {\n            const error = () => url.startsWith(\":\") || url.startsWith(\"/\");\n\n            while (error()) url = url.slice(1);\n            url = `${newProtocol}${url}`;\n        }\n    }\n\n    if (sufix) {\n        const error = () => url.endsWith(\":\") || url.endsWith(\"/\");\n\n        while (error()) url = url.slice(0, -1);\n\n        url = `${url}/${sufix}`;\n    }\n\n    if (removeTrailingSlash) {\n        const error = () => url.endsWith(\"/\");\n\n        while (error()) url = url.slice(0, -1);\n    }\n\n    return url;\n};\n","import { IOAuth2Config, IOAuth2Metadata } from \"../domain\";\nimport { setStore } from \"./_store\";\n\n/**\n * Gets an object of string type parameters and saves the new configuration metadata.\n *\n * @param obj The object of string type parameters\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated (configuration.metadata)\n * @returns An IOAuth2Parameters object\n */\nexport const updateMetadata = (\n    obj: { [key: string]: string },\n    config: IOAuth2Config // Passed by reference and updated (configuration.metadata)\n) => {\n    const storage = config.configuration?.storage;\n\n    config.metadata = {\n        ...config.metadata,\n        ...obj,\n    };\n\n    const id_token = config.parameters?.id_token;\n\n    setStore(\n        \"config\",\n        storage\n            ? config\n            : null\n    );\n\n    return obj as IOAuth2Metadata;\n};\n","import { Observable, catchError, lastValueFrom, map} from \"rxjs\";\nimport { IOAuth2Config, IOAuth2Metadata, IOAuth2Parameters, payloadType, stringsObject } from \"../domain\";\nimport { updateParameters } from \"./_updateParameters\";\nimport { updateMetadata } from \"./_updateMetadata\";\n\n/**\n * Gets an HttpClient get or post request response. If \"areParameters\" is true (default)\n *   the response is converted to IOAuth2Parameters and actualizes config.parameters.\n *   Otherwise, the response actualizes config.metadata.\n *\n * @param request HttpClient get or post method response. (Observable)\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated\n * @param areParameters If true (default), the response is converted to IOAuth2Parameters\n *      and actualizes config.parameters. If false, the response actualizes config.metadata\n * @returns Promise with the request response (or error).\n */\nexport const httpRequest = (\n    request: Observable<payloadType>,\n    config: IOAuth2Config, // Passed by reference and updated\n    areParameters = true\n): Promise<IOAuth2Parameters | IOAuth2Metadata> =>\n    lastValueFrom(\n        (request as Observable<payloadType>).pipe(\n            map(res =>\n                areParameters\n                    ? updateParameters(res as stringsObject, config)\n                    : updateMetadata(res as stringsObject, config)\n            ),\n            catchError(err => {\n                throw err;\n            })\n        )\n    );\n","import { IOAuth2Config, jsonObject } from \"../domain\";\nimport { arrayBufferToHexString, encrypt } from \"../utils/encrypt\";\n\nexport const _save_state = async (\n    config: IOAuth2Config,\n    idToken: jsonObject\n) => {\n    const text = JSON.stringify({config, idToken});\n    const [key, iv, cipher] = await encrypt(text);\n    const keyRaw = await window.crypto.subtle.exportKey(\"raw\", key);\n    const keyString = arrayBufferToHexString(keyRaw);\n    const cipherString = arrayBufferToHexString(cipher);\n    const ivString = arrayBufferToHexString(iv);\n\n    document.cookie = `ngx_oauth2_oidc=${keyString}${ivString}; secure; samesite=strict`;\n    sessionStorage.setItem(\"oauth2_unload\", cipherString);\n};\n","import { HttpClient, HttpHeaders, HttpParams, HttpRequest } from \"@angular/common/http\";\nimport { IOAuth2Config, IOAuth2Metadata, IOAuth2Methods, IOAuth2Parameters, customParametersType, payloadType, stringsObject } from \"../domain\";\nimport { httpRequest } from \"./_httpRequest\";\nimport { setStore } from \"./_store\";\nimport { Observable } from \"rxjs\";\nimport { _save_state } from \"./_saveState\";\n\n/**\n * Request to an OAuth2 endpoint. Redirects to the endpoint or makes a HttpClient\n *   get or post request.\n *\n * @param method Request method (\"\"\"HREF\" for redirection)\n * @param url Endpoint URL\n * @param {HttpClient} request- HttpClient object\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated\n * @param customParameters OAuth2 parameters (standard and custom) for the request. (payload)\n * @param endpoint Endpoint name (for error messages and to determine the type of response)\n * @returns Promise with the request response (or error). In test mode the promise\n *      returns an array with the response (or error) and the request payload.\n */\nexport const request = async <T>(\n    method: \"HREF\" | \"GET\" | \"POST\",\n    url: string,\n    request: HttpClient,\n    config: IOAuth2Config, // Passed by reference and updated\n    customParameters = <customParametersType>{},\n    endpoint: keyof IOAuth2Methods\n): Promise<IOAuth2Parameters | IOAuth2Metadata> => {\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    const content_type =\n        config.configuration?.content_type ??\n        \"application/x-www-form-urlencoded\";\n    const revocation_header = config.configuration?.revocation_header;\n    const tokenHeader =\n        endpoint === \"revocation\" && revocation_header\n            ? {\n                  Authorization: `Bearer ${customParameters[\"token\"]}`\n              }\n            : undefined;\n    const headersInit = {\n        Accept: \"application/json\",\n        \"Content-Type\": content_type,\n        ...tokenHeader,\n    };\n    const headers = new HttpHeaders(headersInit);\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    if (!url) {\n        const err = new Error(`missing endpoint.`, {\n            cause: `oauth2 ${endpoint}`,\n        });\n        throw err;\n    }\n\n    if (revocation_header) delete customParameters[\"token\"];\n\n    const payload = {} as stringsObject;\n\n    // options to params\n    for (const key in customParameters) {\n        let v = customParameters![key as keyof typeof customParameters]; // Option value\n        Array.isArray(v) && (v = v.join(\" \")); // String array to a string of space separated values.\n        if (v || v === false) payload[key] = v.toString(); // If not nullish nor empty, added to params.\n    }\n\n    const params =  new HttpParams({ fromObject: payload})\n\n    // For testing purposes\n    if (test) {\n        const data = Object.keys(payload).length\n            ? payload\n            : { \"@URL\": url };\n\n        setStore(\"test\", storage ? data : null);\n    }\n\n    if (method == \"HREF\") {\n        _save_state(config, {})\n\n        // Redirection\n        const req = new HttpRequest<string>(method, url, null, {\n            params,\n        });\n        location.href = req.urlWithParams;\n        return {};\n    }\n\n    const req: Observable<payloadType> =\n        method == \"POST\"\n            ? request.post<payloadType>(url, \"null\", {\n                  headers,\n                  params,\n                  observe: \"body\",\n              })\n            : request.get<payloadType>(url, {\n                  headers,\n                  params,\n                  observe: \"body\",\n              });\n\n    return httpRequest(\n        req,\n        config!,\n        endpoint !== \"discovery\"\n    );\n};\n","import { customParametersType, IOAuth2Config, IOAuth2Metadata } from \"../domain\";\nimport { mountUrl } from \"./_mountUrl\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { setStore } from \"./_store\";\nimport { request as fnRequest } from \"./_request\";\nimport { _setParameters } from \"./_setParameters\";\nimport { getParameters } from \"./_getParameters\";\n\n/**\n * Request to the discovery endpoint. Returns the discovery document and saves\n *   the metadata in the configuration object (in memory and storage). HttpClient\n *   get request. In test mode, the request payload is also stored within\n *   sessionStorage.\n *\n * @param request HttpClient object\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated (configuration.metadata)\n * @param customParameters Custom parameters for the request.\n * @param url Custom endpoint URL.\n * @returns Promise with the request response (IOAuth2Metadata or error)\n */\nexport const _fetchDiscoveryDoc = async (\n    request: HttpClient,\n    config: IOAuth2Config, // Passed by reference and updated (configuration.metadata)\n    customParameters = <customParametersType>{},\n    url?: string\n): Promise<IOAuth2Metadata> => {\n    // Configuration options\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    const discovery_endpoint = config.configuration?.discovery_endpoint;\n    const sufix =\n        config.configuration?.well_known_sufix ??\n        \".well-known/openid-configuration\";\n    // Metadata fields\n    const issuer = config.metadata?.issuer ?? \"\";\n    // url\n    url ??= discovery_endpoint ?? mountUrl(issuer, \"https\", sufix);\n    // Endpoint parameters\n    const parms = _setParameters({\n        ...getParameters(\"discovery\", config),\n        ...customParameters,\n    });\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    if (!url)\n        throw new Error(\n            `The value of the 'url' option or the 'discovery_endpoint' configuration field or the 'issuer' metadata field is missing.`,\n            {\n                cause: `oauth2 fetchDiscoveryDoc`,\n            }\n        );\n\n    // @ts-expect-error: Until HTMLFencedFrameElement is not experimental\n    if (window.HTMLFencedFrameElement) {\n        // TODO: Test use when not experimental\n    }\n\n    return fnRequest(\n        \"GET\",\n        url,\n        request,\n        config,\n        parms,\n        \"discovery\"\n    ) as IOAuth2Metadata;\n};\n","import pkceChallenge, { generateChallenge } from \"pkce-challenge\";\nimport { IOAuth2Config, IOAuth2Parameters, customParametersType, optionalStringsObject } from \"../domain\";\nimport { isStrNull, notStrNull, secureRandom } from \"../utils\";\nimport { request as fnRequest} from \"./_request\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { getParameters } from \"./_getParameters\";\nimport { setStore } from \"./_store\";\nimport { _setParameters } from \"./_setParameters\";\n\ntype parmsObject = optionalStringsObject;\n\n/**\n * Request to then OAuth2 authorization endpoint. Redirects to the endpoint.\n *   The interceptor function inside the onInit method gets the response and actualizes\n *   the config.parameters. In test mode, the request payload is also stored within\n *   sessionStorage.\n *\n * @param request HttpClient object\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated (configuration.parameters)\n * @param customParameters Custom parameters for the request.\n * @param statePayload Payload to add to state parameter\n * @param url Custom endpoint URL.\n * @returns Promise with the request response (IOAuth2Parameters or error)\n */\nexport const _authorization = async (\n    request: HttpClient,\n    config: IOAuth2Config, // Passed by reference and updated (configuration.parameters)\n    customParameters = <customParametersType>{},\n    statePayload: string = \"\",\n    url?: string\n): Promise<IOAuth2Parameters> => {\n    // Configuration options\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    const no_pkce = !!config.configuration?.no_pkce;\n    const no_state = !!config.configuration?.no_state;\n    // TODO: authorization_grant 'hybrid' and 'free'\n    const grant = config.configuration?.authorization_grant ?? \"code\";\n    const basicGrant = [\"code\", \"implicit\", \"hybrid\"].includes(grant);\n    // Metadata fields\n    const authorization_endpoint = config.metadata?.authorization_endpoint;\n    // url\n    url ??= authorization_endpoint ?? \"\";\n    // Endpoint parameters\n    const arr = (name: string) =>\n        (<string[]>parms[name] ?? []).map(str => str.toLowerCase());\n    const parms = _setParameters({\n        ...getParameters(\"authorization\", config),\n        ...{ state: null, nonce: null }, // This parameters must be created or as custom parameters\n        ...customParameters,\n    });\n    const scope = arr(\"scope\");\n    const response_type = arr(\"response_type\");\n    const code_verifier = (parms[\"code_verifier\"] ??\n        config.token?.[\"code_verifier\"] ?? // Code verifier is used by the token endpoint\n        config.parameters?.code_verifier) as string | undefined;\n    const code_challenge_method = parms[\"code_challenge_method\"] as\n        | \"S256\"\n        | \"plain\"\n        | undefined;\n    const code_challenge = parms[\"code_challenge\"] as string | undefined;\n    const pkce = { code_challenge, code_challenge_method, code_verifier };\n    let stateString, state, nonce;\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Errors & warnings\n    //\n\n    if (!url)\n        throw new Error(\n            `The value of the 'authorization_endpoint' metadata field or the 'url' option is missing.`,\n            {\n                cause: `oauth2 authorization`,\n            }\n        );\n\n    //\n    // End of errors & warnings\n    //\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Modify endpoint parameters based on the values ​​of other parameters\n    //      and configuration options\n    //\n\n    // SCOPE (must be processed before response_type)\n\n    if (!scope.length) {\n        scope.push(\"openid\", \"email\", \"profile\");\n    }\n\n    // RESPONSE_TYPE (must be processed before nonce)\n\n    if (basicGrant || response_type.length > 1) {\n        const noneIdx = response_type.indexOf(\"none\");\n\n        if (noneIdx >= 0) response_type.splice(noneIdx, 1);\n    }\n\n    if (grant == \"code\") {\n        response_type.splice(0, 10, \"code\");\n    }\n\n    if (grant == \"implicit\") {\n        // scope is not empty\n        const userScopes = [\"openid\", \"email\", \"profile\"];\n        const hasUserScope = scope.some(str => userScopes.includes(str));\n        const hasApiScope = scope.some(str => !userScopes.includes(str));\n        const codeIdx = response_type.indexOf(\"code\");\n        const tokenIdx = response_type.indexOf(\"token\");\n        const idTokenIdx = response_type.indexOf(\"id_token\");\n\n        codeIdx >= 0 && response_type.splice(codeIdx, 1);\n\n        hasUserScope &&\n            idTokenIdx < 0 &&\n            tokenIdx < 0 &&\n            response_type.push(\"id_token\");\n\n        hasApiScope && tokenIdx < 0 && response_type.push(\"token\");\n    }\n\n    // PKCE\n\n    for (const prop in pkce) delete (pkce as parmsObject)[prop];\n\n    if (no_pkce || grant != \"code\") {\n        delete parms[\"code_challenge\"];\n        delete parms[\"code_challenge_method\"];\n        delete parms[\"code_verifier\"];\n    } else {\n        Object.assign(pkce, await getPkce(parms, code_verifier as string));\n    }\n\n    // STATE\n\n    if (no_state && storage) {\n        delete parms[\"state\"];\n    } else {\n        stateString = notStrNull(parms[\"state\"], secureRandom(2));\n        state = { state: stateString + statePayload }\n    }\n\n    // NONCE\n\n    const idTokenIdx = response_type.indexOf(\"id_token\");\n\n    if (grant == \"code\" || (grant == \"implicit\" && idTokenIdx >= 0)) {\n        // TODO: Hashed nonce\n        const str_nonce = notStrNull(parms[\"nonce\"], secureRandom(2));\n\n        nonce = { nonce: str_nonce }\n    } else {\n        delete parms[\"nonce\"];\n    }\n\n    //\n    // End of modifying endpoint parameters\n    //\n    ///////////////////////////////////////////////////////////////////\n\n    const newParameters = {\n        ...pkce,\n        ...state,\n        ...nonce,\n    };\n\n    const payload = {\n        ...parms,\n        ...newParameters,\n        scope,\n        response_type,\n    };\n\n    // The 'code_verifier' is used by the token endpoint\n    delete payload[\"code_verifier\"];\n    // The 'code_challenge' and 'code_challenge_method' are no longer needed\n    delete newParameters[\"code_challenge\"];\n    delete newParameters[\"code_challenge_method\"];\n\n    config.parameters = {\n        ...config.parameters,\n        ...newParameters,\n    };\n\n    setStore(\n        \"config\",\n        storage\n            ? config\n            : null\n    );\n\n    return fnRequest<IOAuth2Parameters>(\n        \"HREF\",\n        url,\n        request,\n        config,\n        payload as customParametersType,\n        \"authorization\"\n    ) as IOAuth2Parameters;\n};\n\nconst getPkce = async (\n    parms: customParametersType,\n    verifier: string\n) => {\n    let method = parms[\"code_challenge_method\"];\n\n    if (!isStrNull(method))\n        throw new Error(\n            `The code challenge method \"${method}\",\n            must be a string or nullish.`,\n            { cause: \"oauth2 authorization\" },\n        );\n\n    if (!isStrNull(verifier))\n        throw new Error(\n            `The code verifier \"${verifier}\",\n                must be a string or nullish.`,\n            { cause: \"oauth2 authorization\" }\n        );\n\n    method = notStrNull(method, \"S256\");\n    method = method.toLowerCase() == \"plain\" ? \"plain\" : method;\n    method = method.toLowerCase() == \"s256\" ? \"S256\" : method;\n\n    if (method != \"plain\" && method != \"S256\")\n        throw new Error(\n            `unexpected code challenge method \"${method}\".`,\n            { cause: \"oauth2 authorization\" }\n        );\n\n    verifier = notStrNull(verifier, (await pkceChallenge(128)).code_verifier);\n\n    let challenge = (parms[\"code_challenge\"]) as\n        | string\n        | undefined;\n    challenge = notStrNull(challenge, await generateChallenge(verifier));\n\n    return {\n        code_challenge_method: method as \"S256\" | \"plain\",\n        code_verifier: verifier as string | undefined,\n        code_challenge: challenge,\n    };\n}\n","import {\n    IOAuth2Config,\n    IOAuth2Parameters,\n    customParametersType,\n} from \"../domain\";\nimport { request as fnRequest} from \"./_request\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { getParameters } from \"./_getParameters\";\nimport { setStore } from \"./_store\";\nimport { _setParameters } from \"./_setParameters\";\n\n/**\n * Request to the token endpoint. Returns the tokens and othe date returned by\n *   the endpoint and saves it in the configuration parameters (in memory and storage).\n *   HttpClient post request. In test mode, the request payload is also stored within\n *   sessionStorage.\n *\n * @param request HttpClient object or worker request\n * @param config Configuration object saved in memory. Passed by reference and\n *      updated (configuration.parameters)\n * @param customParameters Custom parameters for the request.\n * @param url Custom endpoint URL.\n * @returns Promise with the request response (IOAuth2Parameters or error)\n */\nexport const _token = async (\n    request: HttpClient,\n    config: IOAuth2Config, // Passed by reference and updated (configuration.parameters)\n    customParameters = <customParametersType>{},\n    url?: string\n) => {\n    // Configuration options\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    const no_pkce = !!config.configuration?.no_pkce;\n    // Metadata fields\n    const token_endpoint = config?.metadata?.token_endpoint;\n    // url\n    url ??= token_endpoint ?? \"\";\n    // Endpoint parameters\n    const parms = _setParameters({\n        ...getParameters(\"token\", config),\n        ...customParameters,\n    });\n    const grant_type = parms[\"grant_type\"];\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Errors & warnings\n    //\n\n    if (!url)\n        throw new Error(\n            `Missing Value ​​for metadata field 'token_endpoint' or option 'url'.`,\n            { cause: `oauth2 token ${grant_type}` }\n        );\n\n    if (!grant_type)\n        throw new Error(\n            `Missing value ​​for configuration parameter 'grant_type'.`,\n            {\n                cause: `oauth2 token`,\n            }\n        );\n\n    //\n    // End of errors & warnings\n    //\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Modify endpoint parameters based on the values ​​of other parameters\n    //      and configuration options\n    //\n\n    if (grant_type == \"authorization_code\") {\n        delete parms[\"assertion\"];\n        delete parms[\"device_code\"];\n        delete parms[\"refresh_token\"];\n\n        if (!no_pkce) {\n            // \"code_verifier\" is for only one use\n            delete config.token?.[\"code_verifier\"];\n            delete config.parameters?.code_verifier;\n\n            const id_token = config.parameters?.id_token;\n\n            setStore(\n                \"config\",\n                storage\n                    ? config\n                    : null\n            );\n\n        }\n    }\n\n    if (grant_type == \"refresh_token\") {\n        delete parms[\"assertion\"];\n        delete parms[\"code\"];\n        delete parms[\"code_verifier\"];\n        delete parms[\"device_code\"];\n    }\n\n    if (no_pkce) {\n        delete parms[\"code_verifier\"];\n    }\n\n    //\n    // End of modifying endpoint parameters\n    //\n    ///////////////////////////////////////////////////////////////////\n\n    return fnRequest<IOAuth2Parameters>(\n        \"POST\",\n        url,\n        request,\n        config,\n        parms,\n        \"token\"\n    );\n};\n","import {\n    IOAuth2Config,\n    IOAuth2Parameters,\n    customParametersType,\n    parameterType,\n} from \"../domain\";\nimport { request as fnRequest} from \"./_request\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { getParameters } from \"./_getParameters\";\nimport { setStore } from \"./_store\";\nimport { _setParameters } from \"./_setParameters\";\n\n/**\n * Access token revocation within configuration. If the parameter token_type_hint\n *   is equal to 'refresh_token' and the refresh_token exists, it is revoked. Default\n *   revokes access token; otherwise, the refresh token. You can indicate the option token,\n *   access_token or update_token.\n *\n * @param request HttpClient object\n * @param config Configuration object saved in memory. Passed by reference and\n *      could be updated (configuration.parameters)\n * @param customParameters Custom parameters for the request.\n * @param url Custom endpoint URL.\n * @returns Promise with the request response (IOAuth2Parameters or error)\n */\nexport const _revocation = async (\n    request: HttpClient,\n    config: IOAuth2Config, // Passed by reference and could be updated (configuration.parameters)\n    customParameters = <customParametersType>{},\n    url?: string\n) => {\n    // Configuration options\n    const test = config.configuration?.test;\n    const storage = config.configuration?.storage;\n    // Metadata fields\n    const revocation_endpoint = config.metadata?.revocation_endpoint;\n    // url\n    url ??= revocation_endpoint ?? \"\";\n    // Endpoint parameters\n    const parms = _setParameters({\n        ...getParameters(\"revocation\", config),\n        ...customParameters,\n    });\n    const token_type_hint = parms[\"token_type_hint\"];\n    const access_token = parms[\"access_token\"];\n    const refresh_token = parms[\"refresh_token\"];\n    let token = parms[\"token\"] as parameterType | undefined;\n\n    setStore(\"test\", storage && test ? {} : null);\n\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Errors & warnings\n    //\n\n    if (!url)\n        throw new Error(\n            `Missing value for option 'url' or metadata field 'revocation_endpoint'.`,\n            { cause: \"oauth2 revocation\" }\n        );\n\n    //\n    // End of errors & warnings\n    //\n    ///////////////////////////////////////////////////////////////////\n    //\n    // Modify endpoint parameters based on the values ​​of other parameters\n    //      and configuration options\n    //\n\n    // TOKEN & ACCESS_TOKEN & REFRESH_TOKEN\n\n    delete parms[\"access_token\"];\n    delete parms[\"refresh_token\"];\n    token =\n        parms[\"token\"] ??\n        (!token_type_hint\n            ? undefined\n            : token_type_hint == \"refresh_token\"\n            ? refresh_token\n            : access_token) ??\n        (!token_type_hint ? access_token ?? refresh_token : undefined);\n\n    // TOKEN ERRORS\n\n    if (token_type_hint && !token)\n        throw new Error(\n            `The token indicated by the token_type_hint is missing.`,\n            { cause: \"oauth2 revocation\" }\n        );\n\n    if (!token)\n        throw new Error(\n            `Missing value for parameters 'token' or 'access_token' or 'refresh_token'.`,\n            { cause: \"oauth2 revocation\" }\n        );\n\n    //\n    // End of modifying endpoint parameters\n    //\n    ///////////////////////////////////////////////////////////////////\n\n    return fnRequest<IOAuth2Parameters>(\n        \"POST\",\n        url,\n        request,\n        config,\n        token ? { ...parms, token } : parms,\n        \"revocation\"\n    );\n};\n","import { JOSEError } from \"jose/errors\";\nimport { HttpErrorResponse } from \"@angular/common/http\";\n\nexport const _errorArray = (err: unknown): [string, any][] => {\n    const isHttpError = err instanceof HttpErrorResponse;\n    const isOAuth2Error = isHttpError && !!err.error.error;\n    const isJOSEError = err instanceof JOSEError;\n\n    const error: [string, any][] = isOAuth2Error\n        ? [[err.error.error, err.error.error_description]]\n        : isHttpError\n        ? [\n              [\n                  (err as HttpErrorResponse).statusText,\n                  (err as HttpErrorResponse).message,\n              ],\n          ]\n        : isJOSEError\n        ? [[(err as JOSEError).name, (err as JOSEError).message]]\n        : (err as Error).cause\n        ? [[(err as Error).cause, (err as Error).message]]\n        : (err as Error).name\n        ? [[(err as Error).name, (err as Error).message]]\n        : typeof err == \"object\"\n        ? Object.entries(err ?? {})\n        : [[(err ?? \"\").toString(), \"\"]];\n    return error;\n};\n","import { HttpClient, HttpHeaders, HttpParams } from \"@angular/common/http\";\nimport { customParametersType, IOAuth2Config, jsonObject, methodType, payloadType, stringsObject } from \"../domain\";\nimport { catchError, lastValueFrom } from \"rxjs\";\nimport { setStore } from \"./_store\";\n\nexport const _api_request = async <T>(\n    request: HttpClient,\n    config: IOAuth2Config,\n    customParameters = <customParametersType>{},\n    url?: string,\n    method: methodType = \"GET\",\n    jsonHeaders  = <jsonObject>{},\n    body = <payloadType>{}\n): Promise<T> => {\n    const test = config.configuration?.test;\n    const content_type =\n        config.configuration?.content_type ??\n        \"application/x-www-form-urlencoded\";\n    const {access_token} = customParameters;\n    const tokenHeader =\n        access_token\n            ? {\n                  Authorization: `Bearer ${access_token}`,\n              }\n            : undefined;\n    jsonHeaders = {...jsonHeaders};\n    for (const key in jsonHeaders)  {\n        jsonHeaders[key] = JSON.stringify(jsonHeaders[key]).replace(\n            /^\"|\"$/g,\n            \"\"\n        );\n    }\n    const headersInit = {\n        Accept: \"application/json\",\n        \"Content-Type\": content_type,\n        ...tokenHeader,\n        ...jsonHeaders\n    };\n    const headers = new HttpHeaders(headersInit);\n\n    setStore(\"test\", test ? {} : null);\n\n    if (!url) {\n        const err = new Error(`missing endpoint.`, {\n            cause: `oauth2 apiRequest`,\n        });\n        throw err;\n    }\n\n    const payload = {} as stringsObject;\n\n    // options to params\n    for (const key in customParameters) {\n        let v = customParameters![key as keyof typeof customParameters]; // Option value\n        Array.isArray(v) && (v = v.join(\" \")); // String array to a string of space separated values.\n        if (v || v === false) payload[key] = v.toString(); // If not nullish nor empty, added to params.\n    }\n\n    const params =  new HttpParams({ fromObject: payload})\n\n    // For testing purposes\n    if (test) {\n        const data = Object.keys(payload).length\n            ? payload\n            : { \"@URL\": url };\n\n        setStore(\"test\", data);\n    }\n\n    const req =\n        method == \"POST\"\n            ? request.post<T>(url, body, {\n                  headers,\n                  params,\n                  observe: \"body\",\n              })\n            : request.get<T>(url, {\n                  headers,\n                  params,\n                  observe: \"body\",\n              });\n\n    return lastValueFrom(\n        req.pipe(\n            catchError(err => {\n                throw err;\n            })\n        )\n    );\n}\n","import { setStore } from \"./_store\";\nimport {\n    HttpClient,\n} from \"@angular/common/http\";\nimport {\n    Inject,\n    Injectable,\n    InjectionToken,\n    inject\n} from \"@angular/core\";\nimport {\n    IOAuth2Config,\n    IOAuth2Parameters,\n    customParametersType,\n    jsonObject,\n    methodType,\n    payloadType,\n} from \"../domain\";\nimport { _oauth2ConfigFactory } from \"./_oauth2ConfigFactory\";\nimport { _interceptor } from \"./_interceptor\";\nimport { _verify_token } from \"./_verify_token\";\nimport { _fetchDiscoveryDoc } from \"./_fetchDiscoveryDoc\";\nimport { _authorization } from \"./_authorization\";\nimport { _token } from \"./_token\";\nimport { _revocation } from \"./_revocation\";\nimport { _errorArray } from \"./_errorArray\";\nimport { _setParameters } from \"./_setParameters\";\nimport { _api_request } from \"./_apiReguest\";\nimport { _save_state } from \"./_saveState\";\nimport { _recover_state } from \"./_recoverState\";\n\nexport const OAUTH2_CONFIG_TOKEN = new InjectionToken<IOAuth2Config>(\n    \"OAuth2 Config\"\n);\n\n@Injectable({\n    providedIn: \"root\",\n})\nexport class Oauth2Service {\n    private readonly http = inject(HttpClient);\n\n    private _config: IOAuth2Config = {};\n    private _idToken: jsonObject = {}; // Api user id_token claims\n    private _isIdTokenIntercepted = false;\n    private _isAccessTokenIntercepted = false;\n    private _isCodeIntercepted = false;\n\n    get config() {\n        return this._config;\n    }\n    get idToken() {\n        return this._idToken;\n    }\n\n    // FLAGS\n    get isIdTokenIntercepted() {\n        return this._isIdTokenIntercepted;\n    }\n    get isAccessTokenIntercepted() {\n        return this._isAccessTokenIntercepted;\n    }\n    get isCodeIntercepted() {\n        return this._isCodeIntercepted;\n    }\n\n    constructor(\n        @Inject(OAUTH2_CONFIG_TOKEN) protected oauth2Config?: IOAuth2Config\n    ) {\n        const newConfig = oauth2Config ?? {};\n        const config = _oauth2ConfigFactory(newConfig);\n        const storage = config.configuration?.storage;\n\n        this._config = config;\n\n        setStore(\"config\", storage ? config : null);\n        setStore(\"idToken\");\n        setStore(\"test\");\n    }\n\n    setConfig = (oauth2Config: IOAuth2Config) => {\n        const config = _oauth2ConfigFactory(oauth2Config);\n        const storage = config.configuration?.storage;\n\n        this._config = config;\n        this._idToken = {};\n\n        if (!storage) return;\n\n        setStore(\"config\", storage ? config : null);\n        setStore(\"idToken\");\n        setStore(\"test\");\n\n        return this.config;\n    };\n\n    setParameters = (parameters: IOAuth2Parameters) => {\n        const parms = { ...parameters };\n        const configParms = { ...this.config.parameters };\n        const storage = this.config.configuration?.storage;\n\n        for (const parm in parameters) {\n            const key = parm as keyof IOAuth2Parameters;\n            const value = parameters[key] as any;\n\n            if (value === undefined || value === null) {\n                delete configParms[key];\n            }\n        }\n\n        parameters = _setParameters(\n            parms as customParametersType,\n            \"setParameters\"\n        );\n\n        this._config.parameters = { ...configParms, ...parameters };\n\n        setStore(\"config\", storage ? this.config : null);\n    };\n\n    /**\n     * Each endpoint uses the parameters defined within the 'parameters' section (config.parameters)\n     *      that are applicable to it. Custom endpoint parameters (config.endpoint_name} can\n     *      override standard parameters. Inline custom parameters (o auth2Service.endpoint(customParameters, ...) )\n     *      can override the configured parameters (standard or custom). An inline parameter with a\n     *      null value removes the configured parameter ( oauth2Service.endpoint({parm: null}, ...) ).\n     *\n     * @param customParameters\n     * @param url\n     * @returns\n     */\n    fetchDiscoveryDoc = (\n        customParameters = <customParametersType>{},\n        url?: string\n    ) => {\n        return _fetchDiscoveryDoc(\n            this.http,\n            this._config, // Parameter passed by reference and updated (config.metadata)\n            customParameters,\n            url\n        );\n    };\n\n    /**\n     * Each endpoint uses the parameters defined within the 'parameters' section (config.parameters)\n     *      that are applicable to it. Custom endpoint parameters (config.endpoint_name} can\n     *      override standard parameters. Inline custom parameters (o auth2Service.endpoint(customParameters, ...) )\n     *      can override the configured parameters (standard or custom). An inline parameter with a\n     *      null value removes the configured parameter ( oauth2Service.endpoint({parm: null}, ...) ).\n     *\n     * @param customParameters\n     * @param statePayload\n     * @param url\n     * @returns\n     */\n    authorization = async (\n        customParameters = <customParametersType>{},\n        statePayload?: string,\n        url?: string\n    ) => {\n        return _authorization(\n            this.http,\n            this._config, // Parameter passed by reference and updated (config.parameters)\n            customParameters,\n            statePayload,\n            url\n        );\n    };\n\n    token = async (\n        customParameters = <customParametersType>{},\n        url?: string\n    ) => {\n        return _token(\n            this.http,\n            this._config, // Parameter passed by reference and updated (config.parameters)\n            {\n                grant_type: \"authorization_code\",\n                ...customParameters,\n            },\n            url\n        );\n    };\n\n    apiRequest = async (\n        customParameters = <customParametersType>{},\n        url?: string,\n        method: methodType = \"GET\",\n        headers: jsonObject = {},\n        body: payloadType = {}\n    ) => {\n        return _api_request(\n            this.http,\n            this.config,\n            customParameters,\n            url,\n            method,\n            headers,\n            body\n        );\n    };\n\n    refresh = async (\n        customParameters = <customParametersType>{},\n        url?: string\n    ) => {\n        return _token(\n            this.http,\n            this._config, // Parameter passed by reference and updated (config.parameters)\n            {\n                grant_type: \"refresh_token\",\n                redirect_uri: null,\n                ...customParameters,\n            },\n            url\n        );\n    };\n\n    revocation = async (\n        customParameters = <customParametersType>{},\n        url?: string\n    ) => {\n        return _revocation(\n            this.http,\n            this._config, // Parameter passed by reference and could be updated (config.parameters)\n            customParameters,\n            url\n        );\n    };\n\n    verify_token = async (\n        customParameters = <customParametersType>{},\n        issuer?: string,\n        jwks_uri?: string\n    ) => {\n        const storage = this.config.configuration?.storage;\n\n        this._idToken = {};\n\n        setStore(\"idToken\");\n\n        await _verify_token(\n            this.config,\n            customParameters,\n            issuer,\n            jwks_uri\n        ).then(idToken => {\n            this._idToken = (idToken as jsonObject) ?? {};\n            setStore(\"idToken\", storage ? this.idToken : null);\n        });\n    };\n\n    interceptor = async () => {\n        const int = _interceptor(\n            this._config, // Parameter passed by reference and updated (oauth2Service.config.parameters)\n            this._idToken // Parameter passed by reference and updated (oauth2Service.idToken)\n        );\n\n        await int.then(v => {\n            this._isIdTokenIntercepted = !!v.id_token;\n            this._isAccessTokenIntercepted = !!v.access_token;\n            this._isCodeIntercepted = !!v.code;\n        });\n\n        return int;\n    };\n\n    saveState = async () =>\n        await _save_state(this._config, this._idToken);\n\n    recoverState = async () => {\n        await _recover_state(this._config, this._idToken);\n    };\n\n    errorArray = (err: unknown) => {\n        return _errorArray(err);\n    };\n}\n","import { makeEnvironmentProviders, EnvironmentProviders } from \"@angular/core\";\nimport { IOAuth2Config } from \"../domain\";\nimport { OAUTH2_CONFIG_TOKEN, Oauth2Service } from \"./oauth2.service\";\n\nexport const provideOAuth2 = (\n    config: IOAuth2Config | null = null\n): EnvironmentProviders =>\n    makeEnvironmentProviders([\n        Oauth2Service,\n        { provide: OAUTH2_CONFIG_TOKEN, useValue: config },\n    ]);\n\n","import { CanActivateFn, Router } from \"@angular/router\";\nimport { inject } from \"@angular/core\";\nimport { Oauth2Service } from \"./oauth2.service\";\n\nexport const idTokenGuard =\n    (path: string = \"\"): CanActivateFn =>\n    async () => {\n        const oauth2 = inject(Oauth2Service);\n        const router = inject(Router);\n\n        await oauth2.recoverState();\n\n        const sub = oauth2.idToken[\"sub\"];\n\n        return sub ? true : router.createUrlTree([path]);\n    };\n","/*\n * Public API Surface of ngx-oauth2-oidc\n */\n\nexport * from './lib/oauth2.service';\nexport * from './lib/provide-oauth2';\nexport * from './lib/idTokenGuard';\nexport * from './domain';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["request","fnRequest"],"mappings":";;;;;;;;;AAEA;;;;;AAKG;AACI,MAAM,QAAQ,GAAG,CACpB,IAAY,EACZ,KAAA,GAAiB,IAAI,KACrB;IACA,MAAM,GAAG,GAAG,cAAc,CAAC;AAE3B,IAAA,MAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC;IAE9C,IAAI,IAAI,IAAI,QAAQ,IAAI,CAAC,CAAC,KAAK,EAAE;AAC7B,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,QAAQ,CAAC;AACpD,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,YAAY,CAAC;AACxD,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,aAAa,CAAC;AACzD,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,IAAI,CAAC;AAChD,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,aAAa,CAAC;AACzD,QAAA,OAAQ,GAAqB,EAAE,UAAU,EAAE,cAAc,CAAC;KAC7D;AAED,IAAA,IAAI,GAAG,CAAA,OAAA,EAAU,IAAI,CAAA,CAAE,CAAC;AACxB,IAAA,IAAI,GAAG,IAAI,IAAI,IAAI,GAAG,KAAK,EAAE;AAAE,QAAA,GAAG,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;;AAC/C,QAAA,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAA;AAC/C,CAAC,CAAC;AAEF;;;;;AAKG;AACI,MAAM,QAAQ,GAAG,CACpB,IAAY,KACG;IACf,MAAM,GAAG,GAAG,cAAc,CAAC;AAE3B,IAAA,IAAI,GAAG,CAAA,OAAA,EAAU,IAAI,CAAA,CAAE,CAAC;AACxB,IAAA,OAAO,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAC7B,CAAC,CAAC;AAEF;;;;;AAKG;AACI,MAAM,cAAc,GAAG,CAC1B,IAAY,KACG;AACf,IAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;AAE3B,IAAA,OAAO,GAAG,GAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAY,GAAG,IAAI,CAAC;AACpD,CAAC;;ACvDD;AACA,MAAM,mBAAmB,GAAG,EAAc,CAAC;AAE3C;AACA,MAAM,uBAAuB,GAAG;IAC5B,YAAY;IACZ,KAAK;IACL,uBAAuB;IACvB,QAAQ;IACR,gBAAgB;IAChB,WAAW;IACX,gBAAgB;IAChB,uBAAuB;IACvB,SAAS;IACT,UAAU;IACV,KAAK;IACL,KAAK;IACL,eAAe;IACf,KAAK;IACL,KAAK;IACL,YAAY;IACZ,SAAS;IACT,KAAK;IACL,OAAO;IACP,QAAQ;IACR,cAAc;IACd,cAAc;IACd,SAAS;IACT,aAAa;IACb,UAAU;IACV,eAAe;IACf,eAAe;IACf,OAAO;IACP,OAAO;IACP,KAAK;IACL,YAAY;IACZ,KAAK;CACR,CAAC;AAEF;AACA,MAAM,eAAe,GAAG;IACpB,aAAa;IACb,kBAAkB;IAClB,WAAW;IACX,UAAU;IACV,uBAAuB;IACvB,kBAAkB;IAClB,uBAAuB;IACvB,WAAW;IACX,eAAe;IACf,MAAM;IACN,eAAe;IACf,aAAa;IACb,YAAY;IACZ,UAAU;IACV,cAAc;IACd,eAAe;IACf,SAAS;IACT,sBAAsB;IACtB,UAAU;IACV,eAAe;IACf,oBAAoB;IACpB,UAAU;IACV,KAAK;CACR,CAAC;AAEF;AACA,MAAM,qBAAqB,GAAG;IAC1B,UAAU,EAAE,WAAW,EAAE,OAAO;CACnC,CAAC;AAEF;AACA,MAAM,oBAAoB,GAAG;IACzB,iBAAiB,EAAE,cAAc,EAAC,eAAe;CACpD,CAAC;AAEF;AACA,MAAM,UAAU,GAAG;IACf,YAAY,EAAE,EAAE;IAChB,sBAAsB,EAAE,SAAoB;IAC5C,WAAW,EAAE,SAAoB;IACjC,sBAAsB,EAAE,SAAoB;IAC5C,UAAU,EAAE,EAAE;IACd,WAAW,EAAE,EAAE;IACf,gBAAgB,EAAE,EAAE;IACpB,SAAS,EAAE,EAAE;IACb,GAAG,EAAE,EAAE;IACP,QAAQ,EAAE,EAAE;IACZ,qBAAqB,EAAE,EAAE;IACzB,WAAW,EAAE,SAAoB;IACjC,MAAM,EAAE,IAAI;IACZ,cAAc,EAAE,EAAE;IAClB,gBAAgB,EAAE,EAAE;IACpB,qBAAqB,EAAE,EAAE;IACzB,SAAS,EAAE,EAAE;IACb,aAAa,EAAE,EAAE;IACjB,GAAG,EAAE,SAAoB;IACzB,IAAI,EAAE,EAAE;IACR,cAAc,EAAE,EAAE;IAClB,qBAAqB,EAAE,EAAsB;IAC7C,aAAa,EAAE,EAAE;IACjB,WAAW,EAAE,EAAE;IACf,OAAO,EAAE,EAAwC;IACjD,QAAQ,EAAE,EAAE;IACZ,KAAK,EAAE,EAAE;IACT,iBAAiB,EAAE,EAAE;IACrB,SAAS,EAAE,EAAE;IACb,GAAG,EAAE,EAAE;IACP,UAAU,EAAE,CAAW;IACvB,UAAU,EAAE,EAAE;IACd,GAAG,EAAE,EAAE;IACP,QAAQ,EAAE,EAAE;IACZ,aAAa,EAAE,EAAE;IACjB,GAAG,EAAE,EAAE;IACP,iBAAiB,EAAE,SAAoB;IACvC,GAAG,EAAE,EAAE;IACP,YAAY,EAAE,SAAoB;IAClC,UAAU,EAAE,EAAE;IACd,OAAO,EAAE,CAAW;IACpB,GAAG,EAAE,EAAE;IACP,SAAS,EAAE,SAAoB;IAC/B,KAAK,EAAE,EAAE;IACT,MAAM,EAAE,SAAoB;IAC5B,MAAM,EAAE,SAAoB;IAC5B,QAAQ,EAAE,EAAE;IACZ,GAAG,EAAE,SAAoB;;IAEzB,MAAM,EAAE,EAA2D;IACnE,YAAY,EAAE,EAAa;IAC3B,aAAa,EAAE,EAAE;IACjB,YAAY,EAAE,EAAE;IAChB,OAAO,EAAE,EAAE;IACX,OAAO,EAAE,EAAE;IACX,WAAW,EAAE,EAAE;IACf,oBAAoB,EAAE,EAAE;IACxB,QAAQ,EAAE,EAAE;IACZ,aAAa,EAAE,EAA0B;IACzC,aAAa,EAAE,EAAc;IAC7B,GAAG,EAAE,SAAoB;IACzB,MAAM,EAAE,SAAoB;IAC5B,KAAK,EAAE,EAAc;IACrB,aAAa,EAAE,SAAoB;IACnC,SAAS,EAAE,SAAoB;IAC/B,KAAK,EAAE,EAAE;IACT,GAAG,EAAE,EAAE;IACP,aAAa,EAAE,EAAE;IACjB,kBAAkB,EAAE,EAAE;IACtB,MAAM,EAAE,SAAoB;IAC5B,UAAU,EAAE,EAAE;IACd,eAAe,EAAE,EAA8C;IAC/D,UAAU,EAAE,EAAE;IACd,QAAQ,EAAE,SAAoB;IAC9B,QAAQ,EAAE,EAAE;IACZ,GAAG,EAAE,EAAE;CACV,CAAC;AAEF;AACA,MAAM,sBAAsB,GAAG;AAC3B,IAAA,UAAU,EAAE,EAAc;AAC1B,IAAA,QAAQ,EAAE,EAAuB;AACjC,IAAA,cAAc,EAAE,EAAqB;AACrC,IAAA,IAAI,EAAE,EAAgC;IACtC,WAAW,EAAE,IAAI,IAAI,EAAE;AACvB,IAAA,MAAM,EAAE,EAAuB;AAC/B,IAAA,WAAW,EAAE,EAAqB;AAClC,IAAA,cAAc,EAAE,EAAc;AAC9B,IAAA,OAAO,EAAE,EAAE;AACX,IAAA,GAAG,EAAE,EAAE;CACV,CAAC;AAIuC,CAAC;AAIY,CAAC;AAIT,CAAC;AAIK,CAAC;AAIA,CAAC;AAIH,CAAC;AAEpD;AACa,MAAA,cAAc,GAAG;AAC1B,IAAA,SAAS,EAAE,mBAAmB;AAC9B,IAAA,aAAa,EAAE,uBAAuB;AACtC,IAAA,KAAK,EAAE,eAAe;AACtB,IAAA,OAAO,EAAE,eAAe;AACxB,IAAA,UAAU,EAAE,oBAAoB;AAChC,IAAA,YAAY,EAAE,qBAAqB;AACnC,IAAA,GAAG,EAAE,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC;EAC9B;AAEF;AACa,MAAA,OAAO,GAAG,CAAC,IAA6B,KAAI;AACrD,IAAA,MAAM,KAAK,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC;AAC/B,IAAA,OAAO,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC;AACvB,UAAE,OAAO;UACP,KAAK,IAAI,IAAI;AACf,cAAE,MAAM;cACN,OAAO,KAAK,CAAC;AACvB;;ACrNA;AACA,MAAM,aAAa,GAAG;;AAElB,IAAA,GAAG,EAAE,EAAE;AAEP;;;;;;;;;AASG;AACH,IAAA,mBAAmB,EAAE,EAA4B;AAEjD;;AAEG;;AAGH;;AAEG;AACH,IAAA,OAAO,EAAE,KAAK;AAEd;;AAEG;AACH,IAAA,QAAQ,EAAE,KAAK;AAEf;;AAEG;AACH,IAAA,OAAO,EAAE,KAAK;AAEd;;AAEG;AACH,IAAA,IAAI,EAAE,KAAK;AAEX;;;AAGG;AACH,IAAA,iBAAiB,EAAE,KAAK;AAExB;;AAEG;AACH,IAAA,kBAAkB,EAAE,EAAE;AAEtB;;;;AAIG;AACH,IAAA,gBAAgB,EAAE,EAAE;AAEpB;;;AAGG;AACH,IAAA,YAAY,EAAE,EAAE;CACnB,CAAC;AAKF;AACa,MAAA,oBAAoB,GAAG,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE;AAE/D;AACa,MAAA,wBAAwB,GAAG;AACpC,IAAA,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,MAAM;;;AC1ExC;AACO,MAAM,OAAO,GAAG;AACnB;;AAEG;AACH,IAAA,SAAS,EAAE,EAA0B;AAErC;;AAEG;AACH,IAAA,aAAa,EAAE,EAA0B;AAEzC;;AAEG;AACH,IAAA,KAAK,EAAE,EAA0B;AAEjC;;AAEG;AACH,IAAA,OAAO,EAAE,EAA0B;AAEnC;;AAEG;AACH,IAAA,YAAY,EAAE,EACmB;AAEjC;;AAEG;AACH,IAAA,UAAU,EAAE,EAA0B;CACzC,CAAC;AAKF;AACa,MAAA,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO;;ACvC9C;AACA,MAAM,QAAQ,GAAG;IACb,oBAAoB,EAAE,EAAc;IACpC,qCAAqC,EAAE,EAAc;IACrD,sBAAsB,EAAE,EAAa;IACrC,8CAA8C,EAAE,KAAK;IACrD,mCAAmC,EAAE,EAAa;IAClD,+DAA+D,EAAE,EAAc;IAC/E,oCAAoC,EAAE,KAAK;IAC3C,4BAA4B,EAAE,KAAK;IACnC,0CAA0C,EAAE,EAAc;IAC1D,yCAAyC,EAAE,KAAK;IAChD,oBAAoB,EAAE,EAAa;IACnC,qBAAqB,EAAE,EAAc;IACrC,wBAAwB,EAAE,EAAc;IACxC,0BAA0B,EAAE,KAAK;IACjC,gBAAgB,EAAE,EAAc;IAChC,gCAAgC,EAAE,EAAc;IAChD,6BAA6B,EAAE,EAAa;IAC5C,wBAAwB,EAAE,EAAc;IACxC,iCAAiC,EAAE,EAAc;IACjD,oBAAoB,EAAE,EAAa;IACnC,6BAA6B,EAAE,KAAK;IACpC,qBAAqB,EAAE,EAAc;IACrC,wCAAwC,EAAE,EAAc;IACxD,wCAAwC,EAAE,EAAc;IACxD,qCAAqC,EAAE,EAAc;IACrD,6CAA6C,EAAE,EAAc;IAC7D,6CAA6C,EAAE,EAAc;IAC7D,sBAAsB,EAAE,EAAa;IACrC,6CAA6C,EAAE,EAAc;IAC7D,wDAAwD,EAAE,EAAc;IACxE,0CAA0C,EAAE,EAAc;IAC1D,MAAM,EAAE,EAAE;IACV,QAAQ,EAAE,EAAa;IACvB,qBAAqB,EAAE,EAAc;IACrC,yCAAyC,EAAE,EAAc;IACzD,yCAAyC,EAAE,EAAc;IACzD,sCAAsC,EAAE,EAAc;IACtD,aAAa,EAAE,EAAa;IAC5B,UAAU,EAAE,EAAa;IACzB,qCAAqC,EAAE,EAAa;IACpD,qBAAqB,EAAE,EAAa;IACpC,8CAA8C,EAAE,EAAc;IAC9D,8CAA8C,EAAE,EAAc;IAC9D,2CAA2C,EAAE,EAAc;IAC3D,2BAA2B,EAAE,KAAK;IAClC,+BAA+B,EAAE,KAAK;IACtC,qCAAqC,EAAE,KAAK;IAC5C,gCAAgC,EAAE,KAAK;IACvC,6BAA6B,EAAE,KAAK;IACpC,wBAAwB,EAAE,EAAc;IACxC,wBAAwB,EAAE,EAAc;IACxC,mBAAmB,EAAE,EAAa;IAClC,0CAA0C,EAAE,EAAc;IAC1D,qDAAqD,EAAE,EAAc;IACrE,gBAAgB,EAAE,EAAc;IAChC,qBAAqB,EAAE,EAAa;IACpC,eAAe,EAAE,EAAE;IACnB,uBAAuB,EAAE,EAAc;IACvC,0CAA0C,EAAE,KAAK;IACjD,cAAc,EAAE,EAAa;IAC7B,qCAAqC,EAAE,EAAc;IACrD,gDAAgD,EAAE,EAAc;IAChE,oBAAoB,EAAE,EAAc;IACpC,wCAAwC,EAAE,EAAc;IACxD,wCAAwC,EAAE,EAAc;IACxD,iBAAiB,EAAE,EAAa;IAChC,qCAAqC,EAAE,EAAc;CACxD,CAAA;AAGmE,CAAC;AAErE;AACa,MAAA,aAAa,GAAG,MAAM,CAAC,IAAI,CACpC,QAAQ;;AC3EZ;AACA,MAAM,MAAM,GAAG;;AAEX,IAAA,aAAa,EAAE,EAA0B;;AAGzC,IAAA,QAAQ,EAAE,EAAqB;;AAG/B,IAAA,UAAU,EAAE,EAAuB;AAEnC,IAAA,GAAG,OAAO;CACb,CAAC;AAKF;AACa,MAAA,cAAc,GAAG;AAC1B,IAAA,GAAG,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;;;ACtBnB,MAAM,QAAQ,GAAG,CAAC,GAAY,KAAK,GAAG,IAAI,IAAI,IAAI,GAAG,CAAC,WAAW,IAAI,GAAG,CAAC,WAAW,CAAC,IAAI,KAAK,QAAQ;;ACAtG,MAAM,MAAM,GAAG,CAAI,IAAO,EAAE,MAA0B,KACzD,CAAC,IAAI,IAAI,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,CAAC;AAEzC,MAAM,OAAO,GAAG,CAAI,IAAO,EAAE,QAAW,EAAE,MAA0B,KACvE,CAAC,IAAI,IAAI,IAAI,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,KAAK,CAAC,GAAG,QAAQ,GAAG,IAAI,CAAC;AAElE;;;;;AAKG;AACI,MAAM,SAAS,GAAG,CAAC,IAAa,KACnC,OAAO,IAAI,IAAI,QAAQ,IAAI,IAAI,IAAI,SAAS,IAAI,IAAI,IAAI,IAAI,CAAC;AAEjE;;;;;;;AAOG;AACI,MAAM,UAAU,GAAG,CAAC,IAAa,EAAE,QAAgB,KAAI;AAC1D,IAAA,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;AAChB,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,EAAG,IAAI,CAAA,6BAAA,CAA+B,EACtC,EAAE,KAAK,EAAE,YAAY,EAAE,CAC1B,CAAC;;QAED,OAAO,CAAC,IAAI,GAAG,QAAQ,GAAG,IAAc,CAAC;AAClD,CAAC;;AC/BD;;;;AAIG;AACI,MAAM,YAAY,GAAG,CAAC,MAAM,GAAG,CAAC,KAAI;AACvC,IAAA,MAAM,KAAK,GAAG,IAAI,cAAc,CAAC,MAAM,CAAC,CAAC;AAEzC,IAAA,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;IAErC,MAAM,GAAG,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,GAAG,CAAC,CAAA,EAAG,CAAC,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAE,CAAA,EAAE,EAAE,CAAC,CAAA;AAE/D,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;;ACbM,MAAM,qBAAqB,GAAG,CAAI,GAAO,KAAI;AAChD,IAAA,IAAI,CAAC,GAAG;AACJ,QAAA,OAAO,SAAS,CAAC;IAErB,MAAM,UAAU,GAAG,GAElB,CAAC;AACF,IAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,WAAW,CAC/B,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CACnE,CAAC;AACF,IAAA,OAAO,QAAa,CAAC;AACzB,CAAC;;ACXM,MAAM,MAAM,GAAG,CAAC,CAAU,KAAI;AACjC,IAAA,IAAI;AACA,QAAA,OAAO,CAAC,CAAC,CAAC,IAAI,OAAO,CAAC,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KACzD;AAAC,IAAA,MAAM;AACJ,QAAA,OAAO,KAAK,CAAC;KAChB;AACL,CAAC;;ACFM,MAAM,cAAc,GAAG,CAAC,iBAAA,GAA0C,EAAE,EAAE,YAAY,GAAG,EAAE,KAAI;AAE9F,IAAA,IAAI,CAAC,iBAAiB,IAAI,MAAM,CAAC,OAAO,CAAC,iBAAiB,CAAC,CAAC,MAAM,IAAI,CAAC;AACnE,QAAA,OAAO,EAAE,CAAC;IAEd,MAAM,UAAU,GAAG,qBAAqB,CAAC,iBAAiB,CAAE,CAAC;;IAI7D,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACzC,MAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAC9B,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAC3C,CAAC;IAEF,IAAI,UAAU,CAAC,MAAM;QACjB,OAAO,CAAC,KAAK,CACT,CAAmC,gCAAA,EAAA,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,CAAA,CAAG,EAC3D;AACI,YAAA,OAAO,EAAE,CAA8E,4EAAA,CAAA;YACvF,KAAK,EAAE,CAAU,OAAA,EAAA,YAAY,CAAE,CAAA;AAClC,SAAA,CACJ,CAAC;;AAIN,IAAA,KAAK,MAAM,IAAI,IAAI,UAAU,EAAE;QAC3B,MAAM,GAAG,GAAG,IAA+B,CAAC;AAC5C,QAAA,MAAM,KAAK,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC;AAC9B,QAAA,MAAM,IAAI,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC;QAE1B,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,EAAE;AACvC,YAAA,OAAO,UAAU,CAAC,GAAG,CAAC,CAAC;YACvB,SAAQ;SACX;AAED,QAAA,IAAI,IAAI,IAAI,OAAO,IAAI,OAAO,KAAK,KAAK,QAAQ;AAC3C,YAAA,UAAU,CAAC,GAAG,CAAc,GAAG,CAAC,KAAK,CAAC,CAAC;AAE5C,QAAA,IAAI,IAAI,IAAI,OAAO,IAAI,OAAO,KAAK,KAAK,QAAQ;AAC3C,YAAA,UAAU,CAAC,GAAG,CAAyB,GAAG,CAAC,KAAK,CAAC,CAAC;AAEvD,QAAA,IAAI,IAAI,IAAI,OAAO,IAAI,OAAO,KAAK,KAAK,QAAQ;AAC3C,YAAA,UAAU,CAAC,GAAG,CAAyB,GAAG,CAAC,KAAK,CAAC,CAAC;AAEvD,QAAA,IAAI,IAAI,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC,EAAE;AACpD,YAAA,MAAM,IAAI,KAAK,CAAC,CAAkB,eAAA,EAAA,GAAG,oBAAoB,EAAE;gBACvD,KAAK,EAAE,CAAU,OAAA,EAAA,YAAY,CAAE,CAAA;AAClC,aAAA,CAAC,CAAC;SACN;QAED,IAAI,IAAI,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE;AAClC,YAAA,MAAM,IAAI,KAAK,CAAC,CAAkB,eAAA,EAAA,GAAG,wBAAwB,EAAE;gBAC3D,KAAK,EAAE,CAAU,OAAA,EAAA,YAAY,CAAE,CAAA;AAClC,aAAA,CAAC,CAAC;SACN;QAED,IACI,IAAI,IAAI,OAAO;AACf,YAAA,IAAI,IAAI,MAAM;AACd,YAAA,IAAI,IAAI,WAAW;AACnB,YAAA,IAAI,IAAI,OAAO,KAAK,EACtB;YACE,MAAM,IAAI,KAAK,CACX,CAAA,eAAA,EAAkB,GAAG,CAAqB,kBAAA,EAAA,IAAI,EAAE,EAChD;gBACI,KAAK,EAAE,CAAU,OAAA,EAAA,YAAY,CAAE,CAAA;AAClC,aAAA,CACJ,CAAC;SACL;KACJ;AAED,IAAA,OAAO,UAAU,CAAA;AACrB,CAAC;;AClED;;;;;;;;;AASG;AACI,MAAM,oBAAoB,GAAG,CAAC,aAA+B,GAAA,EAAE,KAAI;AACtE,IAAA,IAAI,CAAC,aAAa,IAAI,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,MAAM,IAAI,CAAC;AAC3D,QAAA,OAAO,EAAE,CAAC;AAEd,IAAA,MAAM,GAAG,GAAkB,EAAE,CAAC;AAE9B,IAAA,aAAa,GAAG,qBAAqB,CAAC,aAAa,CAAE,CAAC;;AAItD,IAAA,KAAK,MAAM,OAAO,IAAI,aAAa,EAAE;QACjC,MAAM,GAAG,GAAG,OAA8B,CAAC;AAC3C,QAAA,MAAM,KAAK,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC;AAEjC,QAAA,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC;AAChB,YAAA,MAAM,IAAI,KAAK,CACX,CAAA,+BAAA,EAAkC,OAAO,CAAA,mBAAA,CAAqB,EAC9D,EAAE,KAAK,EAAE,4BAA4B,EAAE,CAC1C,CAAC;AAEN,QAAA,IAAI,CAAE,cAA2B,CAAC,QAAQ,CAAC,OAAO,CAAC;AAC/C,YAAA,MAAM,IAAI,KAAK,CACX,CAAA,0CAAA,EAA6C,OAAO,CAAA,EAAA,CAAI,EACxD,EAAE,KAAK,EAAE,4BAA4B,EAAE,CAC1C,CAAC;QAEN,GAAG,CAAC,GAAG,CAAC,GAAG,qBAAqB,CAAM,KAAK,CAAE,CAAC;KACjD;;AAID,IAAA,GAAG,CAAC,aAAa,KAAK,EAAE,CAAC;IAEzB,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;AAChD,IAAA,MAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAC9B,GAAG,IAAI,CAAC,oBAAoB,CAAC,QAAQ,CAAC,GAAG,CAAC,CAC7C,CAAC;IAEF,IAAI,UAAU,CAAC,MAAM;AACjB,QAAA,MAAM,IAAI,KAAK,CACX,qCAAqC,UAAU,CAAC,IAAI,CAChD,IAAI,CACP,CAAA,CAAE,EACH,EAAE,KAAK,EAAE,4BAA4B,EAAE,CAC1C,CAAC;IAEN,GAAG,CAAC,UAAU,GAAG,cAAc,CAAC,GAAG,CAAC,UAAkC,EAAE,qBAAqB,CAAC,CAAC;IAC/F,GAAG,CAAC,UAAU,CAAC,YAAY,KAAK,MAAM,CAAC,QAAQ,CAAC,IAAI;AAC/C,SAAA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AACb,SAAA,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;AAEnB,IAAA,GAAG,CAAC,QAAQ,KAAK,EAAE,CAAC;IAEpB,MAAM,QAAQ,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;AAC3C,IAAA,MAAM,UAAU,GAAG,QAAQ,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC;IAE1E,IAAI,UAAU,CAAC,MAAM;AACjB,QAAA,OAAO,CAAC,KAAK,CACT,uCAAuC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA,CAAA,CAAG,EAC/D,EAAE,KAAK,EAAE,4BAA4B,EAAE,CAC1C,CAAC;AAEN,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;;ACnFM,MAAM,OAAO,GAAG,CACnB,IAAY,KAEZ,MAAM,CAAC,MAAM,CAAC,MAAM;AACf,KAAA,WAAW,CACR;AACI,IAAA,IAAI,EAAE,SAAS;AACf,IAAA,MAAM,EAAE,GAAG;AACd,CAAA,EACD,IAAI,EACJ,CAAC,SAAS,EAAE,SAAS,CAAC,CACzB;AACA,KAAA,IAAI,CAAC,OAAM,GAAG,KAAG;AACd,IAAA,MAAM,EAAE,GAAG,MAAM,CAAC,MAAM,CAAC,eAAe,CAAC,IAAI,UAAU,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7D,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAC7C;AACI,QAAA,IAAI,EAAE,SAAS;QACf,EAAE;KACL,EACD,GAAG,EACH,IAAI,WAAW,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CACjC,CAAC;AACF,IAAA,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;AAC7B,CAAC,CAAC,CAAC;AAEJ,MAAM,OAAO,GAAG,CACnB,GAAc,EACd,EAAe,EACf,MAAmB,KAEnB,MAAM,CAAC,MAAM,CAAC,MAAM;AACf,KAAA,OAAO,CACJ;AACI,IAAA,IAAI,EAAE,SAAS;IACf,EAAE;CACL,EACD,GAAG,EACH,MAAM,CACT;AACA,KAAA,IAAI,CAAE,WAAW,IAAI,IAAI,WAAW,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;AAErE,MAAM,sBAAsB,GAAG,CAAC,WAAwB,KAAI;AAC/D,IAAA,MAAM,UAAU,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;AAC/C,IAAA,MAAM,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC;AAChC,SAAA,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;SAC/C,IAAI,CAAC,EAAE,CAAC,CAAC;AAEd,IAAA,OAAO,MAAM,CAAA;AACjB,CAAC,CAAA;AAEM,MAAM,sBAAsB,GAAG,CAAC,MAAc,KAAI;IACrD,MAAM,UAAU,GAAG,MAAM,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;AAEhD,IAAA,IAAI,CAAC,UAAU;AACX,QAAA,OAAO,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC;IAE9B,MAAM,UAAU,GAAG,IAAI,UAAU,CAC7B,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC,EAAA;AACtB,QAAA,OAAO,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;KAC1B,CAAC,CACL,CAAC;IAEF,OAAO,UAAU,CAAC,MAAM,CAAA;AAC5B,CAAC,CAAA;AAEM,MAAM,SAAS,GAAG,CAAC,IAAY,KAAI;AACtC,IAAA,IAAI,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,CAAG,EAAA,IAAI,CAAG,CAAA,CAAA,CAAC,CAAC;IAEhD,IAAI,KAAK,GAAG,CAAC;AACT,QAAA,OAAO,EAAE,CAAC;IAEd,KAAK,KAAK,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AAC3B,IAAA,MAAM,GAAG,GAAG,QAAQ,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;IAChD,MAAM,KAAK,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CACnC,KAAK,EACL,GAAG,IAAI,CAAC,GAAG,GAAG,GAAG,SAAS,CAC7B,CAAC;AAEF,IAAA,OAAO,KAAK,CAAA;AAChB,CAAC;;AC1EM,MAAM,cAAc,GAAG,OAC1B,MAAqB;AACrB,OAAmB;KACnB;AACA,IAAA,MAAM,WAAW,GAAG,SAAS,CAAC,iBAAiB,CAAC,CAAC;IACjD,MAAM,SAAS,GAAG,cAAc,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;AAE1D,IAAA,cAAc,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC;AAC3C,IAAA,QAAQ,CAAC,MAAM,GAAG,6BAA6B,CAAC;;;IAIhD,IACI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,MAAM;QAC9B,WAAW,CAAC,MAAM,IAAI,EAAE;QACxB,SAAS,EAAE,MAAM,EACnB;QACE,MAAM,QAAQ,GAAG,WAAW,CAAC,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QAC9C,MAAM,OAAO,GAAG,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AAC1C,QAAA,MAAM,SAAS,GAAG,sBAAsB,CAAC,QAAQ,CAAC,CAAC;AACnD,QAAA,MAAM,QAAQ,GAAG,sBAAsB,CAAC,OAAO,CAAC,CAAC;QACjD,MAAM,OAAO,GAAG,sBAAsB,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC;QACxD,MAAM,WAAW,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CACpD,KAAK,EACL,SAAS,EACT,SAAS,EACT,KAAK,EACL,CAAC,SAAS,CAAC,CACd,CAAC;QACF,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,CAAC;QAC3D,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAChC,MAAM,SAAS,GAAG,MAAM,CAAC,MAAM,IAAI,MAAM,IAAI,EAAE,CAAC;QAChD,MAAM,UAAU,GAAG,MAAM,CAAC,OAAO,IAAI,OAAO,IAAI,EAAE,CAAC;AAEnD,QAAA,MAAM,CAAC,MAAM,CAAC,MAAM,EAAE,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC;AACvD,QAAA,MAAM,CAAC,MAAM,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;AAEnC,QAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAE9C,QAAA,QAAQ,CAAC,QAAQ,EAAE,OAAO,GAAG,MAAM,GAAG,IAAI,CAAC,CAAC;AAC5C,QAAA,QAAQ,CAAC,SAAS,EAAE,OAAO,GAAG,OAAO,GAAG,IAAI,CAAC,CAAC;QAC9C,QAAQ,CAAC,MAAM,CAAC,CAAC;KACpB;AACL,CAAC;;AC7CD;;;;;;;;;AASG;AACI,MAAM,gBAAgB,GAAG,CAC5B,GAA8B,EAC9B,MAAqB;KACrB;AACA,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAC9C,IAAA,MAAM,MAAM,GAAyB,EAAE,CAAC;;AAGxC,IAAA,KAAK,MAAM,GAAG,IAAI,GAAG,EAAE;QACnB,MAAM,MAAM,GAAG,GAA8B,CAAC;AAC9C,QAAA,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,CAAC;AACvB,QAAA,MAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,QAAA,MAAM,QAAQ,GACV,IAAI,IAAI,OAAO;AACX,cAAE,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC;cAChB,IAAI,IAAI,QAAQ;AAClB,kBAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAY;kBAC7B,IAAI,IAAI,SAAS;AACnB,sBAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAa;sBAC9B,KAAK,CAAC;AAEf,QAAA,MAAM,CAAC,GAAG,CAAa,GAAG,QAAQ,CAAC;KACvC;AAED,IAAA,IAAI,MAAM,CAAC,YAAY,CAAC,EAAE;QACtB,MAAM,CAAC,YAAY,CAAC;AAChB,YAAA,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAI,MAAM,CAAC,YAAY,CAAY,GAAG,IAAI,CAAC;KACtE;IAED,MAAM,CAAC,UAAU,GAAG;QAChB,GAAG,MAAM,CAAC,UAAU;AACpB,QAAA,GAAG,MAAM;KACZ,CAAC;IAEF,QAAQ,CACJ,QAAQ,EACR,OAAO;AACH,UAAE,MAAM;UACN,IAAI,CACb,CAAC;AAEF,IAAA,OAAO,MAA2B,CAAC;AACvC,CAAC;;AClDM,MAAM,YAAY,GAAG,OACxB,MAAqB;AACrB,OAAmB;KACnB;AAEA,IAAA,MAAM,cAAc,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAEtC,MAAM,MAAM,GAAG,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;IAC1D,MAAM,IAAI,GAAG,kBAAkB,CAAC,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;AACtD,IAAA,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,GAAG,MAAM,CAAC;IACxC,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;AAChC,IAAA,MAAM,KAAK,GAAG,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;AACrD,IAAA,MAAM,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7C,MAAM,MAAM,GAAG,MAAM,CAAC,WAAW,CAAC,OAAO,CAAC,CAAC;AAC3C,IAAA,MAAM,UAAU,GAAG,MAAM,EAAE,UAAU,EAAE,KAAK,CAAC;AAE7C,IAAA,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAE9D,IAAI,CAAC,OAAO,CAAC,MAAM;AAAE,QAAA,OAAO,OAAO,CAAC,OAAO,CAAC,EAAuB,CAAC,CAAC;AAErE,IAAA,IAAI,UAAU,IAAI,UAAU,KAAK,MAAM,CAAC,OAAO,CAAC;QAC5C,OAAO,OAAO,CAAC,MAAM,CACjB,IAAI,KAAK,CAAC,wBAAwB,EAAE;AAChC,YAAA,KAAK,EAAE,oBAAoB;AAC9B,SAAA,CAAC,CACL,CAAC;IAEN,MAAM,SAAS,GAAG,gBAAgB,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;IAEnD,IAAI,SAAS,CAAC,OAAO,CAAC;AAClB,QAAA,OAAO,OAAO,CAAC,MAAM,CACjB,IAAI,KAAK,CAAC,CAAG,EAAA,IAAI,CAAC,SAAS,CAAC,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,EAAE;AAC/C,YAAA,KAAK,EAAE,oBAAoB;AAC9B,SAAA,CAAC,CACL,CAAC;AAEN,IAAA,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;AACtC,CAAC;;AClCD,MAAM,UAAU,GAAG;;IAEf,KAAK,EAAE,UACH,SAA2D,EAAA;QAE3D,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AACrC,QAAA,OAAO,MAAM,CAAC,WAAW,CACrB,OAAO,CAAC,MAAM,CAAC,KAAK,IAAI,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAC/D,CAAC;KACL;IACD,UAAU,EAAE,KAAK;CACpB,CAAC;AAEF;;;;;;;;;AASG;AACI,MAAM,aAAa,GAAG,CACzB,MAA4B,EAC5B,MAAqB,KACC;AACtB,IAAA,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,IAAI,EAAE,CAAC;IAC3C,MAAM,YAAY,GAAG,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC;IAC1C,MAAM,aAAa,GAAG,qBAAqB,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;IAChE,MAAM,MAAM,GAAG,EAAE,GAAG,aAAa,EAAE,GAAG,YAAY,EAAE,CAAC;IAErD,MAAM,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;AAEpD,IAAA,MAAM,KAAK,GAAI,MAAkB,CAAC,MAAM,CAAC,CAAC,CAAS,EAAE,KAAc,KAAK,KAAK,IAAI,IAAI,CAAC,CAAC;AAGvF,IAAA,OAAO,KAA6B,CAAC;AACzC,CAAC,CAAC;AAEF;;;;;;;;AAQG;AACH,MAAM,qBAAqB,GAAG,CAC1B,MAAmC,EACnC,UAA6B,KAC7B;AACA,IAAA,MAAM,KAAK,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;IAErC,MAAM,CAAC,cAAc,CAAC,UAAU,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;;AAExD,IAAA,MAAM,KAAK,GAAG,UAAU,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AAE5D,IAAA,OAAO,KAA0B,CAAC;AACtC,CAAC;;AC9DD;;;;;;;;;;;;;AAaG;AACI,MAAM,aAAa,GAAG,OACzB,MAAqB,EACrB,gBAAA,GAAyC,EAAE,EAC3C,OAAgB,EAChB,SAAkB,KAClB;;AAEA,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;;IAE9C,MAAM,MAAM,GAAG,OAAO,IAAI,MAAM,CAAC,QAAQ,EAAE,MAAM,IAAI,EAAE,CAAC;IACxD,MAAM,QAAQ,GAAG,SAAS,IAAI,MAAM,CAAC,QAAQ,EAAE,QAAQ,IAAI,EAAE,CAAC;;AAE9D,IAAA,MAAM,GAAG,GAAG,CAAC,IAAY,KACpB,gBAAgB,CAAC,IAAI,CAAY,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC;IAC5D,MAAM,KAAK,GAAG,cAAc,CAAC;AACzB,QAAA,GAAG,aAAa,CAAC,cAAc,EAAE,MAAM,CAAC;AACxC,QAAA,GAAG,gBAAgB;AACtB,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,QAAQ,GAAG,GAAG,CAAC,UAAU,CAAC,CAAC;AACjC,IAAA,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;AAE3B,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;AAE9C,IAAA,IAAI,CAAC,QAAQ;QAAE,OAAO;;;;;AAOtB,IAAA,IAAI,CAAC,QAAQ;AACT,QAAA,MAAM,IAAI,KAAK,CAAC,CAAA,2CAAA,CAA6C,EAAE;AAC3D,YAAA,KAAK,EAAE,qBAAqB;AAC/B,SAAA,CAAC,CAAC;AAEP,IAAA,IAAI,CAAC,MAAM;AACP,QAAA,MAAM,IAAI,KAAK,CAAC,CAAA,yCAAA,CAA2C,EAAE;AACzD,YAAA,KAAK,EAAE,qBAAqB;AAC/B,SAAA,CAAC,CAAC;;;;;;;;;;AAaP,IAAA,MAAM,QAAQ,GACT,KAAK,CAAC,UAAU,CAAuB,IAAI,KAAK,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;AAEzE,IAAA,IAAI,CAAC,QAAQ;QACT,MAAM,IAAI,KAAK,CACX,CAAoG,kGAAA,CAAA,EACpG,EAAE,KAAK,EAAE,qBAAqB,EAAE,CACnC,CAAC;;AAIN,IAAA,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,CAAC,CAAC;IAE5D,MAAM,IAAI,GAAG,kBAAkB,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAC;AACnD,IAAA,MAAM,gBAAgB,GAAG,EAAE,GAAG,KAAK,EAA0B,CAAC;AAE9D,IAAA,OAAO,gBAAgB,CAAC,UAAU,CAAC,CAAC;AACpC,IAAA,OAAO,gBAAgB,CAAC,UAAU,CAAC,CAAC;AACpC,IAAA,OAAO,gBAAgB,CAAC,WAAW,CAAC,CAAC;;IAIrC,IAAI,OAAO,GAAe,EAAE,CAAC;AAC7B,IAAA,IAAI;AACA,QAAA,MAAM,EAAE,OAAO,EAAE,WAAW,EAAE,GAAG,MAAM,SAAS,CAC5C,QAAQ,EACR,IAAI,EACJ,gBAAgB,CACnB,CAAC;QACF,OAAO,GAAG,WAAW,CAAC;KACzB;IAAC,OAAO,GAAG,EAAE;QACV,MAAM,KAAK,GAAG,IAAI,KAAK,CAAE,GAAa,CAAC,OAAO,EAAE;AAC5C,YAAA,KAAK,EAAE,qBAAqB;AAC/B,SAAA,CAAC,CAAC;AACH,QAAA,KAAK,CAAC,IAAI,GAAI,GAAa,CAAC,IAAI,CAAC;AACjC,QAAA,MAAM,KAAK,CAAC;KACf;AAED,IAAA,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,OAAO,CAAC,IAAI,KAAK,EAAE;AAC/C,QAAA,MAAM,KAAK,GAAG,KAAK,CAAC,gCAAgC,EAAE;AAClD,YAAA,KAAK,EAAE,qBAAqB;AAC/B,SAAA,CAAC,CAAC;AACH,QAAA,KAAK,CAAC,IAAI,GAAG,0BAA0B,CAAC;AACxC,QAAA,MAAM,KAAK,CAAC;KACf;;;;;IAOD,IAAI,IAAI,EAAE;AACN,QAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,CAAC;KAC5C;AAED,IAAA,OAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACpC,CAAC;;AChID;;;;;;;;;;AAUG;AACI,MAAM,QAAQ,GAAG,CACpB,IAAY,EACZ,QAAiB,EACjB,KAAc,EACd,mBAA6B,KAC7B;IACA,IAAI,GAAG,GAAG,IAAI,CAAC;IAEf,IAAI,QAAQ,EAAE;QACV,MAAM,OAAO,GAAG,GAAG,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AACtC,QAAA,MAAM,eAAe,GAAG,OAAO,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAG,EAAE,CAAC;QAChE,MAAM,WAAW,GAAG,CAAG,EAAA,QAAQ,KAAK,CAAC,WAAW,EAAE,CAAC;AAEnD,QAAA,IAAI,eAAe,IAAI,eAAe,IAAI,WAAW,EAAE;YACnD,GAAG,GAAG,GAAG,CAAC,OAAO,CAAC,eAAe,EAAE,WAAW,CAAC,CAAC;SACnD;QAED,IAAI,CAAC,eAAe,EAAE;AAClB,YAAA,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;AAE/D,YAAA,OAAO,KAAK,EAAE;AAAE,gBAAA,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;AACnC,YAAA,GAAG,GAAG,CAAG,EAAA,WAAW,CAAG,EAAA,GAAG,EAAE,CAAC;SAChC;KACJ;IAED,IAAI,KAAK,EAAE;AACP,QAAA,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAE3D,QAAA,OAAO,KAAK,EAAE;YAAE,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;AAEvC,QAAA,GAAG,GAAG,CAAG,EAAA,GAAG,CAAI,CAAA,EAAA,KAAK,EAAE,CAAC;KAC3B;IAED,IAAI,mBAAmB,EAAE;QACrB,MAAM,KAAK,GAAG,MAAM,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAEtC,QAAA,OAAO,KAAK,EAAE;YAAE,GAAG,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;KAC1C;AAED,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;;AChDD;;;;;;;AAOG;AACI,MAAM,cAAc,GAAG,CAC1B,GAA8B,EAC9B,MAAqB;KACrB;AACA,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;IAE9C,MAAM,CAAC,QAAQ,GAAG;QACd,GAAG,MAAM,CAAC,QAAQ;AAClB,QAAA,GAAG,GAAG;KACT,CAAC;AAEF,IAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,EAAE,QAAQ,CAAC;IAE7C,QAAQ,CACJ,QAAQ,EACR,OAAO;AACH,UAAE,MAAM;UACN,IAAI,CACb,CAAC;AAEF,IAAA,OAAO,GAAsB,CAAC;AAClC,CAAC;;AC3BD;;;;;;;;;;;AAWG;AACI,MAAM,WAAW,GAAG,CACvB,OAAgC,EAChC,MAAqB;AACrB,aAAa,GAAG,IAAI,KAEpB,aAAa,CACR,OAAmC,CAAC,IAAI,CACrC,GAAG,CAAC,GAAG,IACH,aAAa;AACT,MAAE,gBAAgB,CAAC,GAAoB,EAAE,MAAM,CAAC;AAChD,MAAE,cAAc,CAAC,GAAoB,EAAE,MAAM,CAAC,CACrD,EACD,UAAU,CAAC,GAAG,IAAG;AACb,IAAA,MAAM,GAAG,CAAC;AACd,CAAC,CAAC,CACL,CACJ;;AC9BE,MAAM,WAAW,GAAG,OACvB,MAAqB,EACrB,OAAmB,KACnB;AACA,IAAA,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,EAAC,MAAM,EAAE,OAAO,EAAC,CAAC,CAAC;AAC/C,IAAA,MAAM,CAAC,GAAG,EAAE,EAAE,EAAE,MAAM,CAAC,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC,CAAC;AAC9C,IAAA,MAAM,MAAM,GAAG,MAAM,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;AAChE,IAAA,MAAM,SAAS,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAAC;AACjD,IAAA,MAAM,YAAY,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAAC;AACpD,IAAA,MAAM,QAAQ,GAAG,sBAAsB,CAAC,EAAE,CAAC,CAAC;IAE5C,QAAQ,CAAC,MAAM,GAAG,CAAA,gBAAA,EAAmB,SAAS,CAAG,EAAA,QAAQ,2BAA2B,CAAC;AACrF,IAAA,cAAc,CAAC,OAAO,CAAC,eAAe,EAAE,YAAY,CAAC,CAAC;AAC1D,CAAC;;ACTD;;;;;;;;;;;;;AAaG;AACI,MAAM,OAAO,GAAG,OACnB,MAA+B,EAC/B,GAAW,EACX,OAAmB,EACnB,MAAqB;AACrB,gBAAA,GAAyC,EAAE,EAC3C,QAA8B,KACgB;AAC9C,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAC9C,IAAA,MAAM,YAAY,GACd,MAAM,CAAC,aAAa,EAAE,YAAY;AAClC,QAAA,mCAAmC,CAAC;AACxC,IAAA,MAAM,iBAAiB,GAAG,MAAM,CAAC,aAAa,EAAE,iBAAiB,CAAC;AAClE,IAAA,MAAM,WAAW,GACb,QAAQ,KAAK,YAAY,IAAI,iBAAiB;AAC1C,UAAE;AACI,YAAA,aAAa,EAAE,CAAU,OAAA,EAAA,gBAAgB,CAAC,OAAO,CAAC,CAAE,CAAA;AACvD,SAAA;UACD,SAAS,CAAC;AACpB,IAAA,MAAM,WAAW,GAAG;AAChB,QAAA,MAAM,EAAE,kBAAkB;AAC1B,QAAA,cAAc,EAAE,YAAY;AAC5B,QAAA,GAAG,WAAW;KACjB,CAAC;AACF,IAAA,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,WAAW,CAAC,CAAC;AAE7C,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAE9C,IAAI,CAAC,GAAG,EAAE;AACN,QAAA,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,mBAAmB,EAAE;YACvC,KAAK,EAAE,CAAU,OAAA,EAAA,QAAQ,CAAE,CAAA;AAC9B,SAAA,CAAC,CAAC;AACH,QAAA,MAAM,GAAG,CAAC;KACb;AAED,IAAA,IAAI,iBAAiB;AAAE,QAAA,OAAO,gBAAgB,CAAC,OAAO,CAAC,CAAC;IAExD,MAAM,OAAO,GAAG,EAAmB,CAAC;;AAGpC,IAAA,KAAK,MAAM,GAAG,IAAI,gBAAgB,EAAE;QAChC,IAAI,CAAC,GAAG,gBAAiB,CAAC,GAAoC,CAAC,CAAC;AAChE,QAAA,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACtC,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK;YAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;KACrD;IAED,MAAM,MAAM,GAAI,IAAI,UAAU,CAAC,EAAE,UAAU,EAAE,OAAO,EAAC,CAAC,CAAA;;IAGtD,IAAI,IAAI,EAAE;QACN,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM;AACpC,cAAE,OAAO;AACT,cAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAEtB,QAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,GAAG,IAAI,GAAG,IAAI,CAAC,CAAC;KAC3C;AAED,IAAA,IAAI,MAAM,IAAI,MAAM,EAAE;AAClB,QAAA,WAAW,CAAC,MAAM,EAAE,EAAE,CAAC,CAAA;;QAGvB,MAAM,GAAG,GAAG,IAAI,WAAW,CAAS,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE;YACnD,MAAM;AACT,SAAA,CAAC,CAAC;AACH,QAAA,QAAQ,CAAC,IAAI,GAAG,GAAG,CAAC,aAAa,CAAC;AAClC,QAAA,OAAO,EAAE,CAAC;KACb;AAED,IAAA,MAAM,GAAG,GACL,MAAM,IAAI,MAAM;UACV,OAAO,CAAC,IAAI,CAAc,GAAG,EAAE,MAAM,EAAE;YACnC,OAAO;YACP,MAAM;AACN,YAAA,OAAO,EAAE,MAAM;SAClB,CAAC;AACJ,UAAE,OAAO,CAAC,GAAG,CAAc,GAAG,EAAE;YAC1B,OAAO;YACP,MAAM;AACN,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA,CAAC,CAAC;IAEb,OAAO,WAAW,CACd,GAAG,EACH,MAAO,EACP,QAAQ,KAAK,WAAW,CAC3B,CAAC;AACN,CAAC;;ACpGD;;;;;;;;;;;;AAYG;AACI,MAAM,kBAAkB,GAAG,OAC9BA,SAAmB,EACnB,MAAqB;AACrB,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACc;;AAE1B,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAC9C,IAAA,MAAM,kBAAkB,GAAG,MAAM,CAAC,aAAa,EAAE,kBAAkB,CAAC;AACpE,IAAA,MAAM,KAAK,GACP,MAAM,CAAC,aAAa,EAAE,gBAAgB;AACtC,QAAA,kCAAkC,CAAC;;IAEvC,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,MAAM,IAAI,EAAE,CAAC;;IAE7C,GAAG,KAAK,kBAAkB,IAAI,QAAQ,CAAC,MAAM,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;;IAE/D,MAAM,KAAK,GAAG,cAAc,CAAC;AACzB,QAAA,GAAG,aAAa,CAAC,WAAW,EAAE,MAAM,CAAC;AACrC,QAAA,GAAG,gBAAgB;AACtB,KAAA,CAAC,CAAC;AAEH,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;AAE9C,IAAA,IAAI,CAAC,GAAG;AACJ,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,wHAAA,CAA0H,EAC1H;AACI,YAAA,KAAK,EAAE,CAA0B,wBAAA,CAAA;AACpC,SAAA,CACJ,CAAC;;AAGN,IAAA,IAAI,MAAM,CAAC,sBAAsB,EAAE;;KAElC;AAED,IAAA,OAAOC,OAAS,CACZ,KAAK,EACL,GAAG,EACHD,SAAO,EACP,MAAM,EACN,KAAK,EACL,WAAW,CACK,CAAC;AACzB,CAAC;;ACxDD;;;;;;;;;;;;;AAaG;AACI,MAAM,cAAc,GAAG,OAC1BA,SAAmB,EACnB,MAAqB;AACrB,gBAAA,GAAyC,EAAE,EAC3C,YAAA,GAAuB,EAAE,EACzB,GAAY,KACgB;;AAE5B,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;IAC9C,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;IAChD,MAAM,QAAQ,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,EAAE,QAAQ,CAAC;;IAElD,MAAM,KAAK,GAAG,MAAM,CAAC,aAAa,EAAE,mBAAmB,IAAI,MAAM,CAAC;AAClE,IAAA,MAAM,UAAU,GAAG,CAAC,MAAM,EAAE,UAAU,EAAE,QAAQ,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;;AAElE,IAAA,MAAM,sBAAsB,GAAG,MAAM,CAAC,QAAQ,EAAE,sBAAsB,CAAC;;AAEvE,IAAA,GAAG,KAAK,sBAAsB,IAAI,EAAE,CAAC;;IAErC,MAAM,GAAG,GAAG,CAAC,IAAY,KACrB,CAAW,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,GAAG,IAAI,GAAG,CAAC,WAAW,EAAE,CAAC,CAAC;IAChE,MAAM,KAAK,GAAG,cAAc,CAAC;AACzB,QAAA,GAAG,aAAa,CAAC,eAAe,EAAE,MAAM,CAAC;QACzC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;AAC/B,QAAA,GAAG,gBAAgB;AACtB,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,KAAK,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;AAC3B,IAAA,MAAM,aAAa,GAAG,GAAG,CAAC,eAAe,CAAC,CAAC;AAC3C,IAAA,MAAM,aAAa,IAAI,KAAK,CAAC,eAAe,CAAC;AACzC,QAAA,MAAM,CAAC,KAAK,GAAG,eAAe,CAAC;AAC/B,QAAA,MAAM,CAAC,UAAU,EAAE,aAAa,CAAuB,CAAC;AAC5D,IAAA,MAAM,qBAAqB,GAAG,KAAK,CAAC,uBAAuB,CAG5C,CAAC;AAChB,IAAA,MAAM,cAAc,GAAG,KAAK,CAAC,gBAAgB,CAAuB,CAAC;IACrE,MAAM,IAAI,GAAG,EAAE,cAAc,EAAE,qBAAqB,EAAE,aAAa,EAAE,CAAC;AACtE,IAAA,IAAI,WAAW,EAAE,KAAK,EAAE,KAAK,CAAC;AAE9B,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;;;;AAO9C,IAAA,IAAI,CAAC,GAAG;AACJ,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,wFAAA,CAA0F,EAC1F;AACI,YAAA,KAAK,EAAE,CAAsB,oBAAA,CAAA;AAChC,SAAA,CACJ,CAAC;;;;;;;;;;AAaN,IAAA,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;QACf,KAAK,CAAC,IAAI,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;KAC5C;;IAID,IAAI,UAAU,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,EAAE;QACxC,MAAM,OAAO,GAAG,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAE9C,IAAI,OAAO,IAAI,CAAC;AAAE,YAAA,aAAa,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;KACtD;AAED,IAAA,IAAI,KAAK,IAAI,MAAM,EAAE;QACjB,aAAa,CAAC,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;KACvC;AAED,IAAA,IAAI,KAAK,IAAI,UAAU,EAAE;;QAErB,MAAM,UAAU,GAAG,CAAC,QAAQ,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC;AAClD,QAAA,MAAM,YAAY,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;AACjE,QAAA,MAAM,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;QACjE,MAAM,OAAO,GAAG,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;QAC9C,MAAM,QAAQ,GAAG,aAAa,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;QAChD,MAAM,UAAU,GAAG,aAAa,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAErD,OAAO,IAAI,CAAC,IAAI,aAAa,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;QAEjD,YAAY;AACR,YAAA,UAAU,GAAG,CAAC;AACd,YAAA,QAAQ,GAAG,CAAC;AACZ,YAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;QAEnC,WAAW,IAAI,QAAQ,GAAG,CAAC,IAAI,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC9D;;IAID,KAAK,MAAM,IAAI,IAAI,IAAI;AAAE,QAAA,OAAQ,IAAoB,CAAC,IAAI,CAAC,CAAC;AAE5D,IAAA,IAAI,OAAO,IAAI,KAAK,IAAI,MAAM,EAAE;AAC5B,QAAA,OAAO,KAAK,CAAC,gBAAgB,CAAC,CAAC;AAC/B,QAAA,OAAO,KAAK,CAAC,uBAAuB,CAAC,CAAC;AACtC,QAAA,OAAO,KAAK,CAAC,eAAe,CAAC,CAAC;KACjC;SAAM;AACH,QAAA,MAAM,CAAC,MAAM,CAAC,IAAI,EAAE,MAAM,OAAO,CAAC,KAAK,EAAE,aAAuB,CAAC,CAAC,CAAC;KACtE;;AAID,IAAA,IAAI,QAAQ,IAAI,OAAO,EAAE;AACrB,QAAA,OAAO,KAAK,CAAC,OAAO,CAAC,CAAC;KACzB;SAAM;AACH,QAAA,WAAW,GAAG,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1D,KAAK,GAAG,EAAE,KAAK,EAAE,WAAW,GAAG,YAAY,EAAE,CAAA;KAChD;;IAID,MAAM,UAAU,GAAG,aAAa,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;AAErD,IAAA,IAAI,KAAK,IAAI,MAAM,KAAK,KAAK,IAAI,UAAU,IAAI,UAAU,IAAI,CAAC,CAAC,EAAE;;AAE7D,QAAA,MAAM,SAAS,GAAG,UAAU,CAAC,KAAK,CAAC,OAAO,CAAC,EAAE,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;AAE9D,QAAA,KAAK,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,CAAA;KAC/B;SAAM;AACH,QAAA,OAAO,KAAK,CAAC,OAAO,CAAC,CAAC;KACzB;;;;;AAOD,IAAA,MAAM,aAAa,GAAG;AAClB,QAAA,GAAG,IAAI;AACP,QAAA,GAAG,KAAK;AACR,QAAA,GAAG,KAAK;KACX,CAAC;AAEF,IAAA,MAAM,OAAO,GAAG;AACZ,QAAA,GAAG,KAAK;AACR,QAAA,GAAG,aAAa;QAChB,KAAK;QACL,aAAa;KAChB,CAAC;;AAGF,IAAA,OAAO,OAAO,CAAC,eAAe,CAAC,CAAC;;AAEhC,IAAA,OAAO,aAAa,CAAC,gBAAgB,CAAC,CAAC;AACvC,IAAA,OAAO,aAAa,CAAC,uBAAuB,CAAC,CAAC;IAE9C,MAAM,CAAC,UAAU,GAAG;QAChB,GAAG,MAAM,CAAC,UAAU;AACpB,QAAA,GAAG,aAAa;KACnB,CAAC;IAEF,QAAQ,CACJ,QAAQ,EACR,OAAO;AACH,UAAE,MAAM;UACN,IAAI,CACb,CAAC;AAEF,IAAA,OAAOC,OAAS,CACZ,MAAM,EACN,GAAG,EACHD,SAAO,EACP,MAAM,EACN,OAA+B,EAC/B,eAAe,CACG,CAAC;AAC3B,CAAC,CAAC;AAEF,MAAM,OAAO,GAAG,OACZ,KAA2B,EAC3B,QAAgB,KAChB;AACA,IAAA,IAAI,MAAM,GAAG,KAAK,CAAC,uBAAuB,CAAC,CAAC;AAE5C,IAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;AAClB,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,2BAAA,EAA8B,MAAM,CAAA;AACP,wCAAA,CAAA,EAC7B,EAAE,KAAK,EAAE,sBAAsB,EAAE,CACpC,CAAC;AAEN,IAAA,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC;AACpB,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,mBAAA,EAAsB,QAAQ,CAAA;AACG,4CAAA,CAAA,EACjC,EAAE,KAAK,EAAE,sBAAsB,EAAE,CACpC,CAAC;AAEN,IAAA,MAAM,GAAG,UAAU,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;AACpC,IAAA,MAAM,GAAG,MAAM,CAAC,WAAW,EAAE,IAAI,OAAO,GAAG,OAAO,GAAG,MAAM,CAAC;AAC5D,IAAA,MAAM,GAAG,MAAM,CAAC,WAAW,EAAE,IAAI,MAAM,GAAG,MAAM,GAAG,MAAM,CAAC;AAE1D,IAAA,IAAI,MAAM,IAAI,OAAO,IAAI,MAAM,IAAI,MAAM;AACrC,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,kCAAA,EAAqC,MAAM,CAAA,EAAA,CAAI,EAC/C,EAAE,KAAK,EAAE,sBAAsB,EAAE,CACpC,CAAC;AAEN,IAAA,QAAQ,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC,MAAM,aAAa,CAAC,GAAG,CAAC,EAAE,aAAa,CAAC,CAAC;IAE1E,IAAI,SAAS,IAAI,KAAK,CAAC,gBAAgB,CAAC,CAEzB,CAAC;IAChB,SAAS,GAAG,UAAU,CAAC,SAAS,EAAE,MAAM,iBAAiB,CAAC,QAAQ,CAAC,CAAC,CAAC;IAErE,OAAO;AACH,QAAA,qBAAqB,EAAE,MAA0B;AACjD,QAAA,aAAa,EAAE,QAA8B;AAC7C,QAAA,cAAc,EAAE,SAAS;KAC5B,CAAC;AACN,CAAC;;AC7OD;;;;;;;;;;;;AAYG;AACI,MAAM,MAAM,GAAG,OAClBA,SAAmB,EACnB,MAAqB;AACrB,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;;AAEA,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;IAC9C,MAAM,OAAO,GAAG,CAAC,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;;AAEhD,IAAA,MAAM,cAAc,GAAG,MAAM,EAAE,QAAQ,EAAE,cAAc,CAAC;;AAExD,IAAA,GAAG,KAAK,cAAc,IAAI,EAAE,CAAC;;IAE7B,MAAM,KAAK,GAAG,cAAc,CAAC;AACzB,QAAA,GAAG,aAAa,CAAC,OAAO,EAAE,MAAM,CAAC;AACjC,QAAA,GAAG,gBAAgB;AACtB,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,UAAU,GAAG,KAAK,CAAC,YAAY,CAAC,CAAC;AAEvC,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;;;;AAO9C,IAAA,IAAI,CAAC,GAAG;AACJ,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,oEAAA,CAAsE,EACtE,EAAE,KAAK,EAAE,CAAgB,aAAA,EAAA,UAAU,CAAE,CAAA,EAAE,CAC1C,CAAC;AAEN,IAAA,IAAI,CAAC,UAAU;AACX,QAAA,MAAM,IAAI,KAAK,CACX,CAAA,yDAAA,CAA2D,EAC3D;AACI,YAAA,KAAK,EAAE,CAAc,YAAA,CAAA;AACxB,SAAA,CACJ,CAAC;;;;;;;;;AAWN,IAAA,IAAI,UAAU,IAAI,oBAAoB,EAAE;AACpC,QAAA,OAAO,KAAK,CAAC,WAAW,CAAC,CAAC;AAC1B,QAAA,OAAO,KAAK,CAAC,aAAa,CAAC,CAAC;AAC5B,QAAA,OAAO,KAAK,CAAC,eAAe,CAAC,CAAC;QAE9B,IAAI,CAAC,OAAO,EAAE;;AAEV,YAAA,OAAO,MAAM,CAAC,KAAK,GAAG,eAAe,CAAC,CAAC;AACvC,YAAA,OAAO,MAAM,CAAC,UAAU,EAAE,aAAa,CAAC;AAExC,YAAA,MAAM,QAAQ,GAAG,MAAM,CAAC,UAAU,EAAE,QAAQ,CAAC;YAE7C,QAAQ,CACJ,QAAQ,EACR,OAAO;AACH,kBAAE,MAAM;kBACN,IAAI,CACb,CAAC;SAEL;KACJ;AAED,IAAA,IAAI,UAAU,IAAI,eAAe,EAAE;AAC/B,QAAA,OAAO,KAAK,CAAC,WAAW,CAAC,CAAC;AAC1B,QAAA,OAAO,KAAK,CAAC,MAAM,CAAC,CAAC;AACrB,QAAA,OAAO,KAAK,CAAC,eAAe,CAAC,CAAC;AAC9B,QAAA,OAAO,KAAK,CAAC,aAAa,CAAC,CAAC;KAC/B;IAED,IAAI,OAAO,EAAE;AACT,QAAA,OAAO,KAAK,CAAC,eAAe,CAAC,CAAC;KACjC;;;;;AAOD,IAAA,OAAOC,OAAS,CACZ,MAAM,EACN,GAAG,EACHD,SAAO,EACP,MAAM,EACN,KAAK,EACL,OAAO,CACV,CAAC;AACN,CAAC;;AC7GD;;;;;;;;;;;;AAYG;AACI,MAAM,WAAW,GAAG,OACvBA,SAAmB,EACnB,MAAqB;AACrB,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;;AAEA,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;;AAE9C,IAAA,MAAM,mBAAmB,GAAG,MAAM,CAAC,QAAQ,EAAE,mBAAmB,CAAC;;AAEjE,IAAA,GAAG,KAAK,mBAAmB,IAAI,EAAE,CAAC;;IAElC,MAAM,KAAK,GAAG,cAAc,CAAC;AACzB,QAAA,GAAG,aAAa,CAAC,YAAY,EAAE,MAAM,CAAC;AACtC,QAAA,GAAG,gBAAgB;AACtB,KAAA,CAAC,CAAC;AACH,IAAA,MAAM,eAAe,GAAG,KAAK,CAAC,iBAAiB,CAAC,CAAC;AACjD,IAAA,MAAM,YAAY,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC;AAC3C,IAAA,MAAM,aAAa,GAAG,KAAK,CAAC,eAAe,CAAC,CAAC;AAC7C,IAAA,IAAI,KAAK,GAAG,KAAK,CAAC,OAAO,CAA8B,CAAC;AAExD,IAAA,QAAQ,CAAC,MAAM,EAAE,OAAO,IAAI,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;;;;AAO9C,IAAA,IAAI,CAAC,GAAG;QACJ,MAAM,IAAI,KAAK,CACX,CAAyE,uEAAA,CAAA,EACzE,EAAE,KAAK,EAAE,mBAAmB,EAAE,CACjC,CAAC;;;;;;;;;;AAaN,IAAA,OAAO,KAAK,CAAC,cAAc,CAAC,CAAC;AAC7B,IAAA,OAAO,KAAK,CAAC,eAAe,CAAC,CAAC;IAC9B,KAAK;QACD,KAAK,CAAC,OAAO,CAAC;AACd,aAAC,CAAC,eAAe;AACb,kBAAE,SAAS;kBACT,eAAe,IAAI,eAAe;AACpC,sBAAE,aAAa;sBACb,YAAY,CAAC;AACnB,aAAC,CAAC,eAAe,GAAG,YAAY,IAAI,aAAa,GAAG,SAAS,CAAC,CAAC;;IAInE,IAAI,eAAe,IAAI,CAAC,KAAK;QACzB,MAAM,IAAI,KAAK,CACX,CAAwD,sDAAA,CAAA,EACxD,EAAE,KAAK,EAAE,mBAAmB,EAAE,CACjC,CAAC;AAEN,IAAA,IAAI,CAAC,KAAK;QACN,MAAM,IAAI,KAAK,CACX,CAA4E,0EAAA,CAAA,EAC5E,EAAE,KAAK,EAAE,mBAAmB,EAAE,CACjC,CAAC;;;;;IAON,OAAOC,OAAS,CACZ,MAAM,EACN,GAAG,EACHD,SAAO,EACP,MAAM,EACN,KAAK,GAAG,EAAE,GAAG,KAAK,EAAE,KAAK,EAAE,GAAG,KAAK,EACnC,YAAY,CACf,CAAC;AACN,CAAC;;AC3GM,MAAM,WAAW,GAAG,CAAC,GAAY,KAAqB;AACzD,IAAA,MAAM,WAAW,GAAG,GAAG,YAAY,iBAAiB,CAAC;IACrD,MAAM,aAAa,GAAG,WAAW,IAAI,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC;AACvD,IAAA,MAAM,WAAW,GAAG,GAAG,YAAY,SAAS,CAAC;IAE7C,MAAM,KAAK,GAAoB,aAAa;AACxC,UAAE,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,KAAK,CAAC,iBAAiB,CAAC,CAAC;AAClD,UAAE,WAAW;AACb,cAAE;AACI,gBAAA;AACK,oBAAA,GAAyB,CAAC,UAAU;AACpC,oBAAA,GAAyB,CAAC,OAAO;AACrC,iBAAA;AACJ,aAAA;AACH,cAAE,WAAW;kBACX,CAAC,CAAE,GAAiB,CAAC,IAAI,EAAG,GAAiB,CAAC,OAAO,CAAC,CAAC;kBACtD,GAAa,CAAC,KAAK;sBACpB,CAAC,CAAE,GAAa,CAAC,KAAK,EAAG,GAAa,CAAC,OAAO,CAAC,CAAC;sBAC/C,GAAa,CAAC,IAAI;0BACnB,CAAC,CAAE,GAAa,CAAC,IAAI,EAAG,GAAa,CAAC,OAAO,CAAC,CAAC;AACjD,0BAAE,OAAO,GAAG,IAAI,QAAQ;8BACtB,MAAM,CAAC,OAAO,CAAC,GAAG,IAAI,EAAE,CAAC;AAC3B,8BAAE,CAAC,CAAC,CAAC,GAAG,IAAI,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;AACrC,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;;ACtBM,MAAM,YAAY,GAAG,OACxB,OAAmB,EACnB,MAAqB,EACrB,gBAAyC,GAAA,EAAE,EAC3C,GAAY,EACZ,MAAqB,GAAA,KAAK,EAC1B,WAAA,GAA2B,EAAE,EAC7B,IAAA,GAAoB,EAAE,KACV;AACZ,IAAA,MAAM,IAAI,GAAG,MAAM,CAAC,aAAa,EAAE,IAAI,CAAC;AACxC,IAAA,MAAM,YAAY,GACd,MAAM,CAAC,aAAa,EAAE,YAAY;AAClC,QAAA,mCAAmC,CAAC;AACxC,IAAA,MAAM,EAAC,YAAY,EAAC,GAAG,gBAAgB,CAAC;IACxC,MAAM,WAAW,GACb,YAAY;AACR,UAAE;YACI,aAAa,EAAE,CAAU,OAAA,EAAA,YAAY,CAAE,CAAA;AAC1C,SAAA;UACD,SAAS,CAAC;AACpB,IAAA,WAAW,GAAG,EAAC,GAAG,WAAW,EAAC,CAAC;AAC/B,IAAA,KAAK,MAAM,GAAG,IAAI,WAAW,EAAG;QAC5B,WAAW,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CACvD,QAAQ,EACR,EAAE,CACL,CAAC;KACL;AACD,IAAA,MAAM,WAAW,GAAG;AAChB,QAAA,MAAM,EAAE,kBAAkB;AAC1B,QAAA,cAAc,EAAE,YAAY;AAC5B,QAAA,GAAG,WAAW;AACd,QAAA,GAAG,WAAW;KACjB,CAAC;AACF,IAAA,MAAM,OAAO,GAAG,IAAI,WAAW,CAAC,WAAW,CAAC,CAAC;AAE7C,IAAA,QAAQ,CAAC,MAAM,EAAE,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IAEnC,IAAI,CAAC,GAAG,EAAE;AACN,QAAA,MAAM,GAAG,GAAG,IAAI,KAAK,CAAC,mBAAmB,EAAE;AACvC,YAAA,KAAK,EAAE,CAAmB,iBAAA,CAAA;AAC7B,SAAA,CAAC,CAAC;AACH,QAAA,MAAM,GAAG,CAAC;KACb;IAED,MAAM,OAAO,GAAG,EAAmB,CAAC;;AAGpC,IAAA,KAAK,MAAM,GAAG,IAAI,gBAAgB,EAAE;QAChC,IAAI,CAAC,GAAG,gBAAiB,CAAC,GAAoC,CAAC,CAAC;AAChE,QAAA,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;AACtC,QAAA,IAAI,CAAC,IAAI,CAAC,KAAK,KAAK;YAAE,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,CAAC;KACrD;IAED,MAAM,MAAM,GAAI,IAAI,UAAU,CAAC,EAAE,UAAU,EAAE,OAAO,EAAC,CAAC,CAAA;;IAGtD,IAAI,IAAI,EAAE;QACN,MAAM,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,MAAM;AACpC,cAAE,OAAO;AACT,cAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC;AAEtB,QAAA,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;KAC1B;AAED,IAAA,MAAM,GAAG,GACL,MAAM,IAAI,MAAM;UACV,OAAO,CAAC,IAAI,CAAI,GAAG,EAAE,IAAI,EAAE;YACvB,OAAO;YACP,MAAM;AACN,YAAA,OAAO,EAAE,MAAM;SAClB,CAAC;AACJ,UAAE,OAAO,CAAC,GAAG,CAAI,GAAG,EAAE;YAChB,OAAO;YACP,MAAM;AACN,YAAA,OAAO,EAAE,MAAM;AAClB,SAAA,CAAC,CAAC;IAEb,OAAO,aAAa,CAChB,GAAG,CAAC,IAAI,CACJ,UAAU,CAAC,GAAG,IAAG;AACb,QAAA,MAAM,GAAG,CAAC;KACb,CAAC,CACL,CACJ,CAAC;AACN,CAAC;;MC1DY,mBAAmB,GAAG,IAAI,cAAc,CACjD,eAAe,EACjB;MAKW,aAAa,CAAA;AAStB,IAAA,IAAI,MAAM,GAAA;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;KACvB;AACD,IAAA,IAAI,OAAO,GAAA;QACP,OAAO,IAAI,CAAC,QAAQ,CAAC;KACxB;;AAGD,IAAA,IAAI,oBAAoB,GAAA;QACpB,OAAO,IAAI,CAAC,qBAAqB,CAAC;KACrC;AACD,IAAA,IAAI,wBAAwB,GAAA;QACxB,OAAO,IAAI,CAAC,yBAAyB,CAAC;KACzC;AACD,IAAA,IAAI,iBAAiB,GAAA;QACjB,OAAO,IAAI,CAAC,kBAAkB,CAAC;KAClC;AAED,IAAA,WAAA,CAC2C,YAA4B,EAAA;QAA5B,IAAY,CAAA,YAAA,GAAZ,YAAY,CAAgB;AA3BtD,QAAA,IAAA,CAAA,IAAI,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;QAEnC,IAAO,CAAA,OAAA,GAAkB,EAAE,CAAC;AAC5B,QAAA,IAAA,CAAA,QAAQ,GAAe,EAAE,CAAC;QAC1B,IAAqB,CAAA,qBAAA,GAAG,KAAK,CAAC;QAC9B,IAAyB,CAAA,yBAAA,GAAG,KAAK,CAAC;QAClC,IAAkB,CAAA,kBAAA,GAAG,KAAK,CAAC;AAkCnC,QAAA,IAAA,CAAA,SAAS,GAAG,CAAC,YAA2B,KAAI;AACxC,YAAA,MAAM,MAAM,GAAG,oBAAoB,CAAC,YAAY,CAAC,CAAC;AAClD,YAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAE9C,YAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AACtB,YAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAEnB,YAAA,IAAI,CAAC,OAAO;gBAAE,OAAO;AAErB,YAAA,QAAQ,CAAC,QAAQ,EAAE,OAAO,GAAG,MAAM,GAAG,IAAI,CAAC,CAAC;YAC5C,QAAQ,CAAC,SAAS,CAAC,CAAC;YACpB,QAAQ,CAAC,MAAM,CAAC,CAAC;YAEjB,OAAO,IAAI,CAAC,MAAM,CAAC;AACvB,SAAC,CAAC;AAEF,QAAA,IAAA,CAAA,aAAa,GAAG,CAAC,UAA6B,KAAI;AAC9C,YAAA,MAAM,KAAK,GAAG,EAAE,GAAG,UAAU,EAAE,CAAC;YAChC,MAAM,WAAW,GAAG,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE,CAAC;YAClD,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAEnD,YAAA,KAAK,MAAM,IAAI,IAAI,UAAU,EAAE;gBAC3B,MAAM,GAAG,GAAG,IAA+B,CAAC;AAC5C,gBAAA,MAAM,KAAK,GAAG,UAAU,CAAC,GAAG,CAAQ,CAAC;gBAErC,IAAI,KAAK,KAAK,SAAS,IAAI,KAAK,KAAK,IAAI,EAAE;AACvC,oBAAA,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC;iBAC3B;aACJ;AAED,YAAA,UAAU,GAAG,cAAc,CACvB,KAA6B,EAC7B,eAAe,CAClB,CAAC;AAEF,YAAA,IAAI,CAAC,OAAO,CAAC,UAAU,GAAG,EAAE,GAAG,WAAW,EAAE,GAAG,UAAU,EAAE,CAAC;AAE5D,YAAA,QAAQ,CAAC,QAAQ,EAAE,OAAO,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,CAAC;AACrD,SAAC,CAAC;AAEF;;;;;;;;;;AAUG;AACH,QAAA,IAAA,CAAA,iBAAiB,GAAG,CAChB,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;YACA,OAAO,kBAAkB,CACrB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO;YACZ,gBAAgB,EAChB,GAAG,CACN,CAAC;AACN,SAAC,CAAC;AAEF;;;;;;;;;;;AAWG;QACH,IAAa,CAAA,aAAA,GAAG,OACZ,gBAAyC,GAAA,EAAE,EAC3C,YAAqB,EACrB,GAAY,KACZ;YACA,OAAO,cAAc,CACjB,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO;AACZ,YAAA,gBAAgB,EAChB,YAAY,EACZ,GAAG,CACN,CAAC;AACN,SAAC,CAAC;QAEF,IAAK,CAAA,KAAA,GAAG,OACJ,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;YACA,OAAO,MAAM,CACT,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO;AACZ,YAAA;AACI,gBAAA,UAAU,EAAE,oBAAoB;AAChC,gBAAA,GAAG,gBAAgB;aACtB,EACD,GAAG,CACN,CAAC;AACN,SAAC,CAAC;AAEF,QAAA,IAAA,CAAA,UAAU,GAAG,OACT,gBAAyC,GAAA,EAAE,EAC3C,GAAY,EACZ,MAAqB,GAAA,KAAK,EAC1B,OAAsB,GAAA,EAAE,EACxB,IAAoB,GAAA,EAAE,KACtB;YACA,OAAO,YAAY,CACf,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,MAAM,EACX,gBAAgB,EAChB,GAAG,EACH,MAAM,EACN,OAAO,EACP,IAAI,CACP,CAAC;AACN,SAAC,CAAC;QAEF,IAAO,CAAA,OAAA,GAAG,OACN,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;YACA,OAAO,MAAM,CACT,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO;AACZ,YAAA;AACI,gBAAA,UAAU,EAAE,eAAe;AAC3B,gBAAA,YAAY,EAAE,IAAI;AAClB,gBAAA,GAAG,gBAAgB;aACtB,EACD,GAAG,CACN,CAAC;AACN,SAAC,CAAC;QAEF,IAAU,CAAA,UAAA,GAAG,OACT,gBAAA,GAAyC,EAAE,EAC3C,GAAY,KACZ;YACA,OAAO,WAAW,CACd,IAAI,CAAC,IAAI,EACT,IAAI,CAAC,OAAO;YACZ,gBAAgB,EAChB,GAAG,CACN,CAAC;AACN,SAAC,CAAC;QAEF,IAAY,CAAA,YAAA,GAAG,OACX,gBAAyC,GAAA,EAAE,EAC3C,MAAe,EACf,QAAiB,KACjB;YACA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAEnD,YAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YAEnB,QAAQ,CAAC,SAAS,CAAC,CAAC;AAEpB,YAAA,MAAM,aAAa,CACf,IAAI,CAAC,MAAM,EACX,gBAAgB,EAChB,MAAM,EACN,QAAQ,CACX,CAAC,IAAI,CAAC,OAAO,IAAG;AACb,gBAAA,IAAI,CAAC,QAAQ,GAAI,OAAsB,IAAI,EAAE,CAAC;AAC9C,gBAAA,QAAQ,CAAC,SAAS,EAAE,OAAO,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,CAAC;AACvD,aAAC,CAAC,CAAC;AACP,SAAC,CAAC;QAEF,IAAW,CAAA,WAAA,GAAG,YAAW;YACrB,MAAM,GAAG,GAAG,YAAY,CACpB,IAAI,CAAC,OAAO;YACZ,IAAI,CAAC,QAAQ;aAChB,CAAC;AAEF,YAAA,MAAM,GAAG,CAAC,IAAI,CAAC,CAAC,IAAG;gBACf,IAAI,CAAC,qBAAqB,GAAG,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC;gBAC1C,IAAI,CAAC,yBAAyB,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC;gBAClD,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;AACvC,aAAC,CAAC,CAAC;AAEH,YAAA,OAAO,GAAG,CAAC;AACf,SAAC,CAAC;AAEF,QAAA,IAAA,CAAA,SAAS,GAAG,YACR,MAAM,WAAW,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;QAEnD,IAAY,CAAA,YAAA,GAAG,YAAW;YACtB,MAAM,cAAc,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AACtD,SAAC,CAAC;AAEF,QAAA,IAAA,CAAA,UAAU,GAAG,CAAC,GAAY,KAAI;AAC1B,YAAA,OAAO,WAAW,CAAC,GAAG,CAAC,CAAC;AAC5B,SAAC,CAAC;AA/ME,QAAA,MAAM,SAAS,GAAG,YAAY,IAAI,EAAE,CAAC;AACrC,QAAA,MAAM,MAAM,GAAG,oBAAoB,CAAC,SAAS,CAAC,CAAC;AAC/C,QAAA,MAAM,OAAO,GAAG,MAAM,CAAC,aAAa,EAAE,OAAO,CAAC;AAE9C,QAAA,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;AAEtB,QAAA,QAAQ,CAAC,QAAQ,EAAE,OAAO,GAAG,MAAM,GAAG,IAAI,CAAC,CAAC;QAC5C,QAAQ,CAAC,SAAS,CAAC,CAAC;QACpB,QAAQ,CAAC,MAAM,CAAC,CAAC;KACpB;AAvCQ,IAAA,SAAA,IAAA,CAAA,IAAA,GAAA,SAAA,qBAAA,CAAA,iBAAA,EAAA,EAAA,OAAA,KAAA,iBAAA,IAAA,aAAa,cA4BV,mBAAmB,CAAA,CAAA,CAAA,EAAA,CAAA,EAAA;uEA5BtB,aAAa,EAAA,OAAA,EAAb,aAAa,CAAA,IAAA,EAAA,UAAA,EAFV,MAAM,EAAA,CAAA,CAAA,EAAA;;iFAET,aAAa,EAAA,CAAA;cAHzB,UAAU;AAAC,QAAA,IAAA,EAAA,CAAA;AACR,gBAAA,UAAU,EAAE,MAAM;AACrB,aAAA,CAAA;;sBA6BQ,MAAM;uBAAC,mBAAmB,CAAA;;;AC9DtB,MAAA,aAAa,GAAG,CACzB,MAA+B,GAAA,IAAI,KAEnC,wBAAwB,CAAC;IACrB,aAAa;AACb,IAAA,EAAE,OAAO,EAAE,mBAAmB,EAAE,QAAQ,EAAE,MAAM,EAAE;AACrD,CAAA;;ACNE,MAAM,YAAY,GACrB,CAAC,IAAA,GAAe,EAAE,KAClB,YAAW;AACP,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC;AACrC,IAAA,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC;AAE9B,IAAA,MAAM,MAAM,CAAC,YAAY,EAAE,CAAC;IAE5B,MAAM,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;AAElC,IAAA,OAAO,GAAG,GAAG,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;AACrD;;ACfJ;;AAEG;;ACFH;;AAEG;;;;"}